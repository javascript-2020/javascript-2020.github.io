<!doctype html>
<html>
    <head style="display: block;">
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" style="display: block;">
        </link>
        <link style="display: block;" href="/css/page.css" type="stylesheet" id="website-css">
        </link>
        <style style="display: none;" id="tmp">
/*

//javascript-2020.github.io/css/page.css

04-06-24

*/


/*
  //page:
*/

/*
  //vars:-
*/
        :root {
              --bg-opacity          : 1;
              --blue                : rgba(0,191,255,1);
        }
        
/*
  //html:-
*/
        html {
              height                : 100%;
        }
        
        body {
              font-family           : arial;
              line-height           : 24px;
              height                : calc(100% - 16px);
              display               : flex;
              flex-direction        : column;
        }
        
/*
  //hdr:-
*/
        #hdr {
              font-family           : arial;
              position              : relative;
              margin-top            : 0;
              margin-bottom         : 20px;
              background            : white;
              padding-bottom        : 10px;
              border-bottom         : 3px solid var(--blue);
        }
        
        .hdr-icon {
              display               : inline-block;
              text-align            : center;
              background            : whitesmoke;
              border-radius         : 5px;
              border                : 1px solid lightgray;
              padding               : 5px 3px 0px;
              cursor                : pointer;
              margin-right          : 10px;
              min-width             : 50px;
        }
        
        .hdr-icon-img {
        }
        
        .hdr-icon-label {
              margin                : 2px 0 0;
        }
        
        .hdr-title {
              text-align            : center;
              position              : absolute;
              left                  : 0;
              right                 : 0;
              top                   : -15px;
              z-index               : 0;
              margin                : 0 auto;
        }
        
        .hdr-date {
              float                 : right;
        }
        
/*
  //background:-
*/
        #background {
              position              : fixed;
              z-index               : -1;
        }
        
/*
  //contents:-
*/
        #contents {
              position              : fixed;
              z-index               : -1;
              border                : 1px solid lightgray;
              border-radius         : 5px;
              background            : white;
        }
        
/*
  //center:-
*/
        #scroll {
              overflow              : auto;
              flex                  : 1;
        }
        
        #center {
              margin                : 20px auto;
              max-width             : 1000px;
        }
        
/*
  //ftr:-
*/
        #ftr {
              background            : rgba(253,108,158,1);
              height                : 50px;
              margin-top            : 20px;
        }
        
/*
  //heading:-
*/
        .heading {
              border-left           : 5px solid rgba(238,232,170,var(--bg-opacity));
              background            : rgba(239,247,250,var(--bg-opacity));
              padding               : 20px 20px;
        }
        
/*
  //section:-
*/
        section {
              background            : rgba(255,255,234,var(--bg-opacity));
              padding               : 10px;
              border                : 1px solid lightgray;
        }
        
/*
  //sub:-
*/
        .sub-title {
              font-weight           : bold;
              font-size             : 18px;
              color                 : blue;
              margin                : 20px 0 0;
        }
        
        .sub-section {
              margin                : 10px 0 0 40px;
        }
/*
  //hr:-
*/
        .hr {
              border-top            : 1px solid var(--blue);
        }
        
/*
  //anchors:-
*/
        a {
              color                 : blue;
        }
        a:visited {
              color                 : blue;
        }
/*
  //kdb:-
*/
        kbd {
            	margin                : 0px 0.1em;
            	padding               : 0.1em 0.6em;
            	border-radius         : 3px;
            	border                : 1px solid rgb(204, 204, 204);
            	color                 : rgb(51, 51, 51);
            	line-height           : 1.4;
            	font-family           : Arial,Helvetica,sans-serif;
            	font-size             : 16px;
            	display               : inline-block;
            	box-shadow            : 0px 1px 0px rgba(0,0,0,0.2), inset 0px 0px 0px 2px #ffffff;
            	background-color      : rgb(247, 247, 247);
            	text-shadow           : 0 1px 0 #fff;
        }
        
/*
  //code:-
*/
        code {
              background            : rgba(237,237,237,var(--bg-opacity));
              white-space           : pre;
              font-weight           : bold;
              font-size             : 16px;
              position              : relative;
        }
        
        .code-inline {
              background            : rgba(237,237,237,var(--bg-opacity));
              white-space           : nowrap;
              font-weight           : bold;
              font-size             : 16px;
              position              : relative;
              padding               : 3px 7px;
              margin                : 0 5px;
        }
        
        .code {
              display               : block;
              margin                : 20px 0;
              padding               : 0 20px;
              border                : 1px solid rgb(0,191,255);
        }
        
        .code-copy {
              position              : absolute;
              top                   : 5px;
              right                 : 5px;
              width                 : 20px;
              height                : 20px;
              cursor                : pointer;
        }
        
/*
  //mono:-
*/
        mono {
              font-family           : mono;
              font-size             : 16px;
        }
        
        
/*
  //page:-
*/
        </style>
        <style style="display: none;" id="page-css">
table {
              margin                : 20px 0;
              border                : 1px solid lightgray;
        }
        
        td {
              border                : 1px solid lightgray;
              padding               : 5px;
              vertical-align        : top;
        }
        </style>
        <script style="display: none;" id="page-js">
var download    = {};
        
        
        window.addEventListener('load',function(){
        
              $('#http-file-upload-zip').onclick    = download.zip;
              $('#http-file-upload-js').onclick     = download.file;
              
        })//onload
        
        
        download.file=async function(){
        
              var url       = 'https://raw.githubusercontent.com/javascript-2020/code-projects/main/http-file-upload/http-file-upload.js';
              var blob      = await fetch(url).then(res=>res.blob());
              var url       = window.URL.createObjectURL(blob);
              var a         = document.createElement('a');
              a.href        = 'url';
              a.download    = 'http-file-upload.js';
              a.click();
              
        }//file
        
        
        download.zip=async function(){
        
              var JSZip   = (await import('https://cdn.jsdelivr.net/npm/jszip/+esm')).default;
              var zip     = new JSZip();
              var path    = 'http-file-upload/';
              var file    = `${path.split('/').filter(Boolean).at(-1)||repo}.zip`;
              var url     = `https://api.github.com/repos/javascript-2020/code-projects/git/trees/main?recursive=true`;
              var json    = await fetch(url).then(res=>res.json());
              
              await Promise.all(json.tree.map(async item=>{
              
                    if(!item.path.startsWith(path))return;
                    
                    var fn    = item.path.slice(path.length);
                    if(item.type=='tree'){
                          zip.folder(fn);
                    }else{
                          var res     = await fetch(item.url);
                          var blob    = await res.blob();
                          zip.file(fn,blob);
                    }
                    
              }));
              
              zip.generateAsync({type:'blob'}).then(blob=>{
              
                    var url         = window.URL.createObjectURL(blob);
                    var a           = document.createElement('a');
                    a.href          = url;
                    a.download      = file;
                    a.click();
                    
              });
              
        }//zip
        </script>
        <meta style="display: block;" name="viewport" content="width=device-width, initial-scale=1">
        </meta>
    </head>
    <body>
        <div id="hdr" style="">
            <a id="home" class="hdr-icon" href="https://javascript-2020.github.io/">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAABA5JREFUOE+lkVtsVEUYx//fnDnn7KW73XZ7peVSWtvSC5duGrXGkBLFUH1AfdD0DWNMn3zwwURJZA2++CKJvtCoSBMkaoLEBDEYpBQCldRSUnq11La4lF7YstfuntuM2cIjKLGTTDLJN//f9/1mCE+womdP+Ae+u1V/99Ls8IHZ49l/i9AT8JA+czx06du5nxam459t8fg/b78Yth+X+09gODyqdW3ua5mfSLQOXkrEa3Tt5PqA3yx3FmXvvMiFzRY8G/vDB0qPrkv542NLB+Pp1GEpBAV8viOH3ip9b13Aj75cOBhLxg8LIagoUHAk/HbZ/wNeGZNvKhyha8MxNRhQ3yUiWloxjz2zI3BXEmbanqKvHzXpYz/l6qT8ghG6LEcmGENh7qJty5imMo8ATrXVUucjgVJKdusW1EgEjs8HcrtBo6NwCqozrddGFrozhrMdkA+zBE1lU60NJV2puby+xkYomQxkMglZWQmlpgYWXR6XtZyjUzgYAUMeAUVk48K5y3cnLMJpAHsXlhfhOAIVZWUgQr8lsvv2P7+1WnLskcA9CKSYgibbxknqH5MtNomfpZRuAIyIDEHijd6+5d+hKaelkHvHpqYghIOG2joojPVnLHVfx25fiEn2vZRSByCIKMMle5l6zieCI5ORU5msuTvn5dKVyYYtJR2BAk9qas74wTDFbkA8VGY55cHKDZ79mWRCnZxd/iVrOXW5otul9TXVVb5O73TPewoc+0eAXsoVfB7FeHpn8Sd5bt5sOeLVmb9X1fISV04VkYUsqio9tsbpt9Ws82v/jXuHU6u250E3ee6+wl+j8ImonyznrBDiOSEEdE2Bx21mGZMKAFVKrMHWIgIgljvAEZLM1YzmNkwHjLHcviJVpYM+6IkEdaGdvxeN7lyJx1BfXY2Az4KSCxIgpIRh2CAiqJzl3nAN7gggnlQxPj2NwvwAioLBGwYzX6APu2fLdc17wTSNesu2EfDnobU5kFNHxrQw8ucSlu+n4XVpcOkcVRsLUFLoRTLtYOBmDLFECirn0DR9wjDTe+hQz8omJuxeIcRWKSU0jSPUmA+vm2E2ch9/jM5DVRn8XhdSqybKi33YUV8G0wIGR+MwzQfTM8b+Eoy3U/irpRri1Dtze64ylkhge/02tDYXQkoLt+djWFpJQ1EYvG4NGcOCW+fYUOKHz+vFwM0VDE+MI+D3o2rT5oi0ZTuFj841kO4+MzQyUhxLxvHsrhBam0ugKBZiySySaRMKI+g6X5uGc2UN6nZ5MTC8hP6hQQR8+djV1LQsjcwr9P6nEz5P0L9rcGKcx2NxtIVa0NJQilQ2jTuLMUSjaXDOkefVkU0b4C4FwXwXKipKcX14EVcHryM/kI9Q/TZ7NZoY+gdEZNOa/2ZSPwAAAABJRU5ErkJggg==" class="hdr-icon-img" />
                <div class="hdr-icon-label">
home
                </div>
            </a>
            <a id="github" class="hdr-icon" href="https://github.com/javascript-2020/javascript-2020.github.io/tree/main/utils/github/download-a-directory-from-a-github-repository">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" class="hdr-icon-img" />
                <div class="hdr-icon-label">
github
                </div>
            </a>
            <img id="title" style="height: 80px; top: -15px;" class="hdr-title" src="http-file-upload.png" />
            <div style="" id="date" class="hdr-date">
06 Jun 2024
            </div>
        </div>
        <div id="background" style="position: fixed; z-index: -1;">
        </div>
        <div id="contents" style="position: fixed;">
            <div>
http-file-upload
            </div>
            <div>
installation
            </div>
            <div>
npm global installation
            </div>
            <div>
node-x
            </div>
        </div>
        <div id="scroll">
            <div id="center" style="">
                <h3 style="margin-top: 0px;" class="heading">
http-file-upload
                </h3>
                <section id="description" style="margin-top: 0px;">
                    <div>
http-file-upload is a http server whose only function is to upload and download files ( of any size )
                    </div>
                    <div style="margin-top: 10px;">
the http server has been designed as a single, no dependency, file for ease of use and portability
                    </div>
                    <div style="margin-top: 10px;">
                        <div>
files can be uploaded and downloaded
                        </div>
                        <ul>
                            <li>
using the built browser interface
                            </li>
                            <li>
by a http request, such as those made through node.js, php, curl, python, c++, c#, java
                            </li>
                        </ul>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
install
                </h3>
                <section id="install">
                    <div style="" id="npm-global">
                        <h4 style="font-weight: bold; color: blue; font-size: 18px; margin: 0px;" class="sub-title">
npm global installation
                        </h4>
                        <div style="margin: 10px 40px;" class="sub-section">
                            <div>
recommended way to install
                            </div>
                            <code class="code">
npm install http-file-upload -g
                            </code>
                            <div>
http-file-upload can then be run from anywhere on the file system by typing on the command line
                            </div>
                            <div>
the following test should succeed
                            </div>
                            <code class="code">
http-file-upload -version
                            </code>
                            <br />
                            <div>
                                <div>
note :
                                    <b>
windows powershell users
                                    </b>
                                </div>
                                <div>
running powershell scripts are disabled by default
                                </div>
                                <div>
to get the script to run normally in powershell users will have to delete
                                    <span class="inline-code">
http-file-upload.ps1
                                    </span>
file from the default npm script installation directory this is usually
                                </div>
                            </div>
                            <code class="code">
c:&#x2F;users&#x2F;&lt;user&gt;&#x2F;AppData&#x2F;Roaming&#x2F;npm&#x2F;
                            </code>
                            <div>
or launch the program using
                            </div>
                            <code class="code">
http-file-upload.cmd -version
                            </code>
                        </div>
                    </div>
                    <div id="node-x" style="margin-top: 20px;">
                        <h4 class="sub-title">
node-x
                        </h4>
                        <div class="sub-section">
                            <div>
i also have another utility for running node.js scripts :
                                <a href="#" title="no yet implemented" style="color: blue;">
node-x
                                </a>
                                <div title="coming soon" style="height: 50px; border: 1px solid lightgray; width: 150px; display: flex; justify-content: center; align-items: center; cursor: pointer; margin-top: 10px;">
npm : node-x
                                </div>
                            </div>
                            <div style="margin-top: 10px;">
npm local installation
                            </div>
                            <code class="code">
npm install http-file-upload
                            </code>
                            <div>
if the directory is not already accessible to node-x, add the current directory
                            </div>
                            <code class="code">
node-x -add
                            </code>
                            <div>
then run from anywhere on the command line with
                            </div>
                            <code class="code">
node-x http-file-upload.js
                            </code>
                        </div>
                    </div>
                    <div style="margin-top: 40px;">
see also
                        <a href="#alternate-install" style="color: blue;">
alternative installation methods
                        </a>
below
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
uninstall
                </h3>
                <section id="uninstall">
                    <div id="npm-global">
                        <div style="font-weight: bold;" class="sub-title">
npm global installation
                        </div>
                        <div class="sub-section">
                            <code class="code">
npm uninstall http-file-upload -g
                            </code>
                        </div>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
operation
                </h3>
                <section id="operation">
                    <div id="nic-port">
                        <div class="sub-title" style="margin: 0px;">
network interface &#x2F; port
                        </div>
                        <div class="sub-section">
                            <div>
the server listens on all network interfaces
                            </div>
                            <div>
the default port is 3000
                            </div>
                        </div>
                    </div>
                    <div id="user-interface">
                        <div class="sub-title">
user interface
                        </div>
                        <div class="sub-section">
                            <div style="margin-top: 10px;">
the built in user interface is accessible, on all network interfaces, at
                            </div>
                            <a href="https://127.0.0.1:3000/" style="color: blue; display: block;">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;
                            </a>
                            <a href="https://127.0.0.1:3000/hello" style="color: blue; display: block;">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;hello
                            </a>
                        </div>
                    </div>
                    <div id="command-line-parameters">
                        <div class="sub-title">
command line parameters
                        </div>
                        <div class="sub-section">
                            <div style="margin-top: 20px;">
http-file-upload supports the following command line parameters
                            </div>
                            <div>
the parameters can be specified in any order, with or without the dash or with a double dash
                            </div>
                            <table style="">
                                <tbody>
                                    <tr id="port">
                                        <td style="width: 120px;">
-p | -port
                                        </td>
                                        <td style="width: 180px;">
&lt;port&gt;
                                        </td>
                                        <td>
sets the port the server listens on
                                        </td>
                                    </tr>
                                    <tr id="dir">
                                        <td>
-d | -dir
                                        </td>
                                        <td>
                                            <div>
&lt;dir&gt;
                                            </div>
                                        </td>
                                        <td>
sets a directory to put new uploads or where to find files for download, its relative to the serving directory, if the directory does not exist it is created
                                        </td>
                                    </tr>
                                    <tr id="cwd">
                                        <td>
-cwd
                                        </td>
                                        <td>
&lt;directory&gt;
                                        </td>
                                        <td>
sets the current working directory for the script
                                        </td>
                                    </tr>
                                    <tr id="https">
                                        <td>
-https | -http
                                        </td>
                                        <td>
                                        </td>
                                        <td>
set whether the server uses https ( default ) or http
                                        </td>
                                    </tr>
                                    <tr id="cert">
                                        <td>
-cert
                                        </td>
                                        <td>
&lt;cert-file&gt; &lt;key-file&gt;
                                        </td>
                                        <td>
specify a public certificate to use, pem format, the current certificate and key will be replaced and written to the file
                                            <br />
                                            <a href="https://javascript-2020.github.io/utils/generate-https-certificate/generate-https-certificate.html" style="color: blue;">
generate https certificates
                                            </a>
                                        </td>
                                    </tr>
                                    <tr id="version">
                                        <td>
-v | -version
                                        </td>
                                        <td>
                                        </td>
                                        <td>
prints the current version of the program
                                        </td>
                                    </tr>
                                    <tr id="help">
                                        <td>
-h | -help
                                        </td>
                                        <td>
                                        </td>
                                        <td>
command line quick help
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="download-url">
                        <div class="sub-title">
download url
                        </div>
                        <div class="sub-section">
                            <div>
download a file using a http request at url
                            </div>
                            <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;download?filename
                            </code>
                        </div>
                    </div>
                    <div id="download-list">
                        <div class="sub-title">
download files list
                        </div>
                        <div class="sub-section">
                            <div>
                                <span>
a list of all files available to download is available from the following url, data in JSON format is returned
                                </span>
                            </div>
                            <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;download-list

{files:[&quot;a.txt&quot;,&quot;b.txt&quot;]}
                            </code>
                        </div>
                    </div>
                    <div id="upload-url">
                        <div class="sub-title">
upload url
                        </div>
                        <div class="sub-section">
                            <span>
upload a file to this url using a http request, the upload body must be a binary file
                            </span>
                            <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;upload?filename
                            </code>
                        </div>
                    </div>
                    <div id="quit">
                        <div class="sub-title">
quit
                        </div>
                        <div class="sub-section">
                            <div>
the server can be quit from the command line by pressing
                            </div>
                            <code class="code">
escape &#x2F; q &#x2F; ctrl-c
                            </code>
                        </div>
                    </div>
                    <div id="launch">
                        <div class="sub-title">
launch
                        </div>
                        <div class="sub-section">
                            <div>
if http-file-upload is accessible globally, and you have some files you want to access over http in a directory
                                <span class="inline-code">
&#x2F;work&#x2F;tmp&#x2F;
                                </span>
                            </div>
                            <ol>
                                <li>
change to directory
                                    <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                    </span>
                                </li>
                                <li>
type
                                    <span class="code-inline">
http-file-upload
                                    </span>
press
                                    <kbd>
enter
                                    </kbd>
                                </li>
                            </ol>
                            <ul style="">
                                <li>
                                    <div>
open a web browser at
                                        <a href="https://localhost:3000/" style="color: blue;">
https:&#x2F;&#x2F;localhost:3000&#x2F;
                                        </a>
                                    </div>
                                </li>
                                <li>
                                    <div>
perform a http request
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
example useage
                </h3>
                <section id="example-useage">
                    <div id="cwd">
                        <div class="sub-title" style="margin-top: 0px;">
upload&#x2F;download files in the current directory
                        </div>
                        <div class="sub-section">
                            <code class="code">
http-file-upload
                            </code>
                        </div>
                    </div>
                    <div id="cwd-port">
                        <div class="sub-title">
upload&#x2F;download files in the current directory using port 4000
                        </div>
                        <div class="sub-section">
                            <code class="code">
http-file-upload -p 4000
                            </code>
                        </div>
                    </div>
                    <div id="download-txt-node">
                        <div class="sub-title">
download a txt file in node
                        </div>
                        <div class="sub-section">
                            <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;download?myfile.js&#39;;
var opts    = {rejectUnauthorized:false};

require(&#39;https&#39;).get(url,opts,async res=&gt;{

  &#x2F;&#x2F; node &gt;v20
  
      var body    = &#39;&#39;;
      for await(data of res)body   += data;
      console.log(body);   

  
  &#x2F;&#x2F; not using for await ...
  
      var body  = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
});
                            </code>
                        </div>
                    </div>
                    <div id="download-large-binary-node">
                        <div class="sub-title">
download a large binary file in node
                        </div>
                        <div class="sub-section">
                            <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;download?video.mp4&#39;;
var opts    = {rejectUnauthorized:false};

require(&#39;https&#39;).get(url,opts,async res=&gt;{

      var fd    = require(&#39;fs&#39;).createWriteStream(&#39;&#x2F;tmp&#x2F;video.mp4&#39;);
      res.pipe(fd);
  
});
                            </code>
                        </div>
                    </div>
                    <div id="download-all-files-node">
                        <div class="sub-title">
to download all files in a directory via nodejs
                        </div>
                        <div class="sub-section">
                            <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;&#39;;
var opts    = {rejectUnauthorized:false};
var https   = require(&#39;https&#39;);

https.get(`${url}download-list`,opts,async res=&gt;{

      var body    = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;{
      
            var json    = JSON.parse(body);
            json.files.forEach(file=&gt;{
            
                  https.get(`${url}download?${file}`,opts,res=&gt;{
                  
                        var fd    = fs.createWriteStream(file);
                        res.pipe(fd);
                    
                  });
              
            });
            
      });
  
});
                            </code>
                        </div>
                    </div>
                    <div id="upload-node">
                        <div class="sub-title">
to upload a file in nodejs
                        </div>
                        <div class="sub-section">
                            <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;upload?my-file.txt&#39;;
var body    = require(&#39;fs&#39;).readFileSync(&#39;my-file.txt&#39;);

var req     = require(&#39;https&#39;).request(url,{method:&#39;post&#39;,rejectUnauthorized:false},rec);
req.write(body);
req.end();

req.on(&#39;error&#39;, function(err){
      console.log(err);
});

async function rec(res){

      var body = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
}&#x2F;&#x2F;rec
                            </code>
                        </div>
                    </div>
                    <div id="upload-large-binary-node">
                        <div class="sub-title">
to upload a large binary file in nodejs
                        </div>
                        <div class="sub-section">
                            <code class="code">
var fd      = require(&#39;fs&#39;).createReadStream(&#39;video.mp4&#39;);

var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;upload?video.mp4&#39;;
var opts    = {method:&#39;post&#39;,rejectUnauthorized:false};

var req     = require(&#39;https&#39;).request(url,opts,rec);
req.on(&#39;error&#39;,err=&gt;console.log(err));
fd.pipe(req);


async function rec(res){

      var body = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
}&#x2F;&#x2F;rec
                            </code>
                        </div>
                    </div>
                    <div id="upload-file-browser">
                        <div class="sub-title">
to upload a file from the browser
                        </div>
                        <div class="sub-section">
                            <div>
remember to accept the server cert in the browser
                            </div>
                            <code class="code">
var input         = document.createElement(&#39;input&#39;);
input.type        = &#39;file&#39;;
input.onchange    = onchange;
input.click();

async function onchange(e){

      var file    = input.files[0];
      var url     = `https:&#x2F;&#x2F;localhost:3000&#x2F;upload?${file.name}`;
      var res     = await fetch(url,{method:&#39;post&#39;,body:file});
      var txt     = await res.text();
      console.log(txt);
      
}&#x2F;&#x2F;onchange
                            </code>
                        </div>
                    </div>
                    <div id="download-curl">
                        <div class="sub-title">
download a file with curl
                        </div>
                        <div class="sub-section">
                            <code class="code">
curl --insecure https:&#x2F;&#x2F;localhost:3000&#x2F;download?my-file.txt
                            </code>
                        </div>
                    </div>
                    <div id="serve-alternate">
                        <div class="sub-title">
serving files from an alternate directory
                        </div>
                        <div class="sub-section">
                            <div>
if you installed http-file-upload locally with npm at
                                <span class="inline-code">
&#x2F;work&#x2F;http-file-upload&#x2F;
                                </span>
                                <span>
and wish to access files at
                                    <span class="inline-code">
&#x2F;work&#x2F;tmp&#x2F;
                                    </span>
                                </span>
                            </div>
                            <code class="code">
npx http-file-upload -cwd &#x2F;work&#x2F;tmp&#x2F;
                            </code>
                        </div>
                    </div>
                    <div id="single-file-cwd">
                        <div class="sub-title">
single file http-file-upload.js
                        </div>
                        <div class="sub-section">
                            <div>
                                <span class="code-inline">
&#x2F;work&#x2F;http-file-upload&#x2F;
                                </span>
                                <span>
and wish to access files at
                                </span>
                                <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                </span>
                            </div>
                            <code class="code">
node http-file-upload -cwd &#x2F;work&#x2F;tmp&#x2F;
                            </code>
                        </div>
                    </div>
                    <div id="update-https-cert">
                        <div class="sub-title">
update https certificate
                        </div>
                        <div class="sub-section">
                            <div>
you can download certificates from
                                <a href="https://javascript-2020.github.io/utils/generate-https-certificate/generate-https-certificate.html" style="color: blue;">
generate https certificates
                                </a>
                            </div>
                            <div>
the files can be given in either order and the key and cert must be pem encoded
                            </div>
                            <code class="code">
http-file-upload -cert server-cert.pem private-key.pem
                            </code>
                        </div>
                    </div>
                    <div id="http-server">
                        <div class="sub-title">
using http
                        </div>
                        <div class="sub-section">
                            <code class="code">
http-file-upload -http
                            </code>
                        </div>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
alternative installation methods
                </h3>
                <section id="alternate-install">
                    <div id="npm-local">
                        <h4 class="sub-title" style="margin-top: 0px;">
npm local install
                        </h4>
                        <div class="sub-section">
                            <code class="code">
npm install http-file-upload
                            </code>
                            <div>
this will download http-file-upload to
                                <span class="inline-code">
.&#x2F;node_modules&#x2F;http-file-upload
                                </span>
                            </div>
                            <div>
http-file-upload can then be run using the command, from the directory which you issued the npm install command
                            </div>
                            <code class="code">
npx http-file-upload -version
                            </code>
                        </div>
                    </div>
                    <div id="github">
                        <h4 class="sub-title">
install from github
                        </h4>
                        <div class="sub-section">
                            <div id="zip-file">
download the project files as a zip file from github
                                <div id="http-file-upload-zip" style="display: inline-flex; align-items: center; border: 1px solid lightgray; padding: 0px 5px; border-radius: 3px; cursor: pointer; color: blue;">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAcRJREFUOE/tkz9IQlEUxr+r0pRBROHg8J6LQUNBQxBYQ6S4VCC9iAh0sblaioZsiFrKOZeCiOiFUC3yjIYSBAchhyAJ9A0OUkSQTeF7t96zP768YUVL0N3Od8753fPdwyWUUoo6h4SIXkFDdUtBvgRcegEu/gMZb/8H33DrfAsWkwVCh4AGc4NuinzY8qPyCPFCRFktw9/lNxg3WD7LnaF/ux8mYkKPrQfJYJIJ7I30IlVMQaUqTidP0efoe4MagIqqoHujG5nrjF7g5tyIjkdhXbHqcWm+BN+uD3E5rsedbZ1IT6VhNpnZQE0t3hch7AtIFBLPXwPwODyQ8pLe4OE9kHISQACX3QVxVIStyfa55ddM9iaLkb0RXN5eMj9le0s7DsYO4Gx11uTJ1e0VXU4sY3N405CU72QEj4I4lo8N+iA3iMhQBFwzZ9ADhwEsuBaehw9pxgC+kUduNlcD9e543ybVJotNxGpgjjUH8g/5ygJfgZyVQ36mIlYfzf7cyZwurQ6sMm3y6zzkkvw1oFalUEUvNpP3bVZf+m0gczNVIhNoIRbYG+31epn5wkMBZVo2Wv4RidFEwskwnY5P/wov7A7jCRah4mR5BNdrAAAAAElFTkSuQmCC" style="border-radius: 3px; border: 1px solid lightgray; box-sizing: border-box; width: 12px; height: 12px; margin-right: 3px;" />
http-file-upload.zip
                                </div>
                                <div>
unzip the file, then either run locally or add the launch script to the system path
                                </div>
                            </div>
                            <div style="margin-top: 10px;" id="single-file">
download the single file
                                <div href="#" id="http-file-upload-js" style="display: inline-flex; align-items: center; border: 1px solid lightgray; padding: 0px 5px; border-radius: 3px; cursor: pointer; color: blue;">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAcRJREFUOE/tkz9IQlEUxr+r0pRBROHg8J6LQUNBQxBYQ6S4VCC9iAh0sblaioZsiFrKOZeCiOiFUC3yjIYSBAchhyAJ9A0OUkSQTeF7t96zP768YUVL0N3Od8753fPdwyWUUoo6h4SIXkFDdUtBvgRcegEu/gMZb/8H33DrfAsWkwVCh4AGc4NuinzY8qPyCPFCRFktw9/lNxg3WD7LnaF/ux8mYkKPrQfJYJIJ7I30IlVMQaUqTidP0efoe4MagIqqoHujG5nrjF7g5tyIjkdhXbHqcWm+BN+uD3E5rsedbZ1IT6VhNpnZQE0t3hch7AtIFBLPXwPwODyQ8pLe4OE9kHISQACX3QVxVIStyfa55ddM9iaLkb0RXN5eMj9le0s7DsYO4Gx11uTJ1e0VXU4sY3N405CU72QEj4I4lo8N+iA3iMhQBFwzZ9ADhwEsuBaehw9pxgC+kUduNlcD9e543ybVJotNxGpgjjUH8g/5ygJfgZyVQ36mIlYfzf7cyZwurQ6sMm3y6zzkkvw1oFalUEUvNpP3bVZf+m0gczNVIhNoIRbYG+31epn5wkMBZVo2Wv4RidFEwskwnY5P/wov7A7jCRah4mR5BNdrAAAAAElFTkSuQmCC" style="border-radius: 3px; border: 1px solid lightgray; box-sizing: border-box; width: 12px; height: 12px; margin-right: 3px;" />
http-file-upload.js
                                </div>
                                <div>
http-file-upload can then be run by
                                </div>
                                <code class="code">
node http-file-upload -version
                                </code>
                            </div>
                        </div>
                    </div>
                    <div id="system-path">
                        <h4 class="sub-title">
system path environment variable
                        </h4>
                        <div class="sub-section">
                            <div style="margin-top: 20px;">
if you would like http-file-upload to be accessible from anywhere on the file system, the directory
                                <code class="code">
http-file-upload&#x2F;ext&#x2F;
                                </code>
should be added to the system path, http-file-upload comes with the following shell scripts to launch the process :
                            </div>
                            <code class="code">
windows ............ http-file-upload&#x2F;ext&#x2F;http-file-upload.bat
mac ................ http-file-upload&#x2F;ext&#x2F;http-file-upload.sh
linux .............. http-file-upload&#x2F;ext&#x2F;http-file-upload.sh
                            </code>
                        </div>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
feedback
                </h3>
                <section id="feedback" style="">
                    <div id="stackoverflow">
                        <h4 class="sub-title">
stackoverflow chat
                        </h4>
                        <div class="sub-section">
                            <div>
im usually available in the
                                <a href="https://chat.stackoverflow.com/rooms/17/javascript" style="color: blue;">
stackoverflow javascript chat room
                                </a>
user matt, come and say hi, id love to hear from you
                            </div>
                        </div>
                    </div>
                    <div id="email">
                        <h4 class="sub-title">
email
                        </h4>
                        <div class="sub-section">
or by email
                            <a href="mailto:javascript.12.03.2024@gmail.com">
javascript.12.03.2024@gmail.com
                            </a>
                        </div>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
links
                </h3>
                <section id="links" style="">
                    <div id="github" style="">
                        <a href="https://github.com/javascript-2020/code-projects/tree/main/http-file-upload" style="border: 1px solid lightgray; padding: 7px; display: inline-flex; border-radius: 5px;">
                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" style="margin-right: 10px;" />
                            <span style="color: blue;">
https:&#x2F;&#x2F;github.com&#x2F;javascript-2020&#x2F;code-projects&#x2F;tree&#x2F;main&#x2F;http-file-upload&#x2F;
                            </span>
                        </a>
                    </div>
                    <div id="npm" style="margin-top: 20px;">
                        <a href="https://www.npmjs.com/package/http-file-upload">
                            <img src="https://nodei.co/npm/http-file-upload.png" />
                        </a>
                    </div>
                </section>
                <h3 class="heading" style="margin-top: 40px;">
other interesting works
                </h3>
                <section id="other" style="">
                    <div id="github" style="">
                        <a href="https://github.com/javascript-2020/code-projects/tree/main" style="border: 1px solid lightgray; padding: 7px; display: inline-flex; border-radius: 5px;">
                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" style="margin-right: 10px;" />
                            <span style="color: blue;">
https:&#x2F;&#x2F;github.com&#x2F;javascript-2020&#x2F;code-projects&#x2F;tree&#x2F;main
                            </span>
                        </a>
                    </div>
                </section>
            </div>
        </div>
        <div id="ftr" style="height: 50px; margin-top: 20px;">
        </div>
    </body>
    <script style="display: block;" src="/js/website.js" id="website-js">
    </script>
</html>
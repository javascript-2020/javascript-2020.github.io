<!doctype html>
<html>
    <head style="display: block;">
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" style="display: block;">
        </link>
        <link style="display: block;" href="/css/website.css" id="website-css" rel="stylesheet">
        </link>
        <style style="display: none;" id="page-css">
table {
              margin                : 20px 0;
              border                : 1px solid lightgray;
        }
        
        td {
              border                : 1px solid lightgray;
              padding               : 5px;
              vertical-align        : top;
        }
        </style>
        <script style="display: none;" id="page-js">
var download    = {};


        window.addEventListener('load',function(){
        
              $('#http-file-upload-zip').onclick    = download.zip;
              $('#http-file-upload-js').onclick     = download.file;
              
        })//onload
        
        
        download.file=async function(){
        
              var url       = 'https://raw.githubusercontent.com/javascript-2020/code-projects/main/http-file-upload/http-file-upload.js';
              var blob      = await fetch(url).then(res=>res.blob());
              var url       = window.URL.createObjectURL(blob);
              var a         = document.createElement('a');
              a.href        = 'url';
              a.download    = 'http-file-upload.js';
              a.click();
              
        }//file
        
        
        download.zip=async function(){
        
              var JSZip   = (await import('https://cdn.jsdelivr.net/npm/jszip/+esm')).default;
              var zip     = new JSZip();
              var path    = 'http-file-upload/';
              var file    = `${path.split('/').filter(Boolean).at(-1)||repo}.zip`;
              var url     = `https://api.github.com/repos/javascript-2020/code-projects/git/trees/main?recursive=true`;
              var json    = await fetch(url).then(res=>res.json());
              
              await Promise.all(json.tree.map(async item=>{
              
                    if(!item.path.startsWith(path))return;
                    
                    var fn    = item.path.slice(path.length);
                    if(item.type=='tree'){
                          zip.folder(fn);
                    }else{
                          var res     = await fetch(item.url);
                          var blob    = await res.blob();
                          zip.file(fn,blob);
                    }
                    
              }));
              
              zip.generateAsync({type:'blob'}).then(blob=>{
              
                    var url         = window.URL.createObjectURL(blob);
                    var a           = document.createElement('a');
                    a.href          = url;
                    a.download      = file;
                    a.click();
                    
              });
              
        }//zip
        </script>
        <meta style="display: block;" name="viewport" content="width=device-width, initial-scale=1">
        </meta>
    </head>
    <body>
        <div id="hdr" style="">
            <a id="home" class="hdr-icon" href="https://javascript-2020.github.io/">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAABA5JREFUOE+lkVtsVEUYx//fnDnn7KW73XZ7peVSWtvSC5duGrXGkBLFUH1AfdD0DWNMn3zwwURJZA2++CKJvtCoSBMkaoLEBDEYpBQCldRSUnq11La4lF7YstfuntuM2cIjKLGTTDLJN//f9/1mCE+womdP+Ae+u1V/99Ls8IHZ49l/i9AT8JA+czx06du5nxam459t8fg/b78Yth+X+09gODyqdW3ua5mfSLQOXkrEa3Tt5PqA3yx3FmXvvMiFzRY8G/vDB0qPrkv542NLB+Pp1GEpBAV8viOH3ip9b13Aj75cOBhLxg8LIagoUHAk/HbZ/wNeGZNvKhyha8MxNRhQ3yUiWloxjz2zI3BXEmbanqKvHzXpYz/l6qT8ghG6LEcmGENh7qJty5imMo8ATrXVUucjgVJKdusW1EgEjs8HcrtBo6NwCqozrddGFrozhrMdkA+zBE1lU60NJV2puby+xkYomQxkMglZWQmlpgYWXR6XtZyjUzgYAUMeAUVk48K5y3cnLMJpAHsXlhfhOAIVZWUgQr8lsvv2P7+1WnLskcA9CKSYgibbxknqH5MtNomfpZRuAIyIDEHijd6+5d+hKaelkHvHpqYghIOG2joojPVnLHVfx25fiEn2vZRSByCIKMMle5l6zieCI5ORU5msuTvn5dKVyYYtJR2BAk9qas74wTDFbkA8VGY55cHKDZ79mWRCnZxd/iVrOXW5otul9TXVVb5O73TPewoc+0eAXsoVfB7FeHpn8Sd5bt5sOeLVmb9X1fISV04VkYUsqio9tsbpt9Ws82v/jXuHU6u250E3ee6+wl+j8ImonyznrBDiOSEEdE2Bx21mGZMKAFVKrMHWIgIgljvAEZLM1YzmNkwHjLHcviJVpYM+6IkEdaGdvxeN7lyJx1BfXY2Az4KSCxIgpIRh2CAiqJzl3nAN7gggnlQxPj2NwvwAioLBGwYzX6APu2fLdc17wTSNesu2EfDnobU5kFNHxrQw8ucSlu+n4XVpcOkcVRsLUFLoRTLtYOBmDLFECirn0DR9wjDTe+hQz8omJuxeIcRWKSU0jSPUmA+vm2E2ch9/jM5DVRn8XhdSqybKi33YUV8G0wIGR+MwzQfTM8b+Eoy3U/irpRri1Dtze64ylkhge/02tDYXQkoLt+djWFpJQ1EYvG4NGcOCW+fYUOKHz+vFwM0VDE+MI+D3o2rT5oi0ZTuFj841kO4+MzQyUhxLxvHsrhBam0ugKBZiySySaRMKI+g6X5uGc2UN6nZ5MTC8hP6hQQR8+djV1LQsjcwr9P6nEz5P0L9rcGKcx2NxtIVa0NJQilQ2jTuLMUSjaXDOkefVkU0b4C4FwXwXKipKcX14EVcHryM/kI9Q/TZ7NZoY+gdEZNOa/2ZSPwAAAABJRU5ErkJggg==" class="hdr-icon-img" />
                <div class="hdr-icon-label">
home
                </div>
            </a>
            <a id="github" class="hdr-icon" href="https://github.com/javascript-2020/javascript-2020.github.io/tree/main/utils/github/download-a-directory-from-a-github-repository">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" class="hdr-icon-img" />
                <div class="hdr-icon-label">
github
                </div>
            </a>
            <img id="title" style="height: 80px; top: -15px;" class="hdr-title" src="http-file-upload.png" />
            <div style="" id="date" class="hdr-date">
09 Jun 2024
            </div>
        </div>
        <div id="background" style="position: fixed; z-index: -1;">
        </div>
        <div id="content" style="left: 7px; top: 121px; display: none;">
            <div id="content-title">
contents
            </div>
            <div id="content-card">
                <div class="content-heading" id="http-file-upload">
                    <div>
http-file-upload
                    </div>
                </div>
                <div class="content-heading" id="install">
                    <div>
install
                    </div>
                </div>
                <div class="content-sub" id="npm-global">
                    <div>
npm global installation
                    </div>
                </div>
                <div class="content-sub" id="node-x" style="">
                    <div style="">
node-x
                    </div>
                </div>
                <div class="content-heading" id="uninstall">
                    <div>
uninstall
                    </div>
                </div>
                <div class="content-sub" id="uninstall-npm-global">
                    <div>
npm global installation
                    </div>
                </div>
                <div class="content-heading" id="operation">
                    <div>
operation
                    </div>
                </div>
                <div class="content-sub" id="nic-port">
                    <div>
network interface &#x2F; port
                    </div>
                </div>
                <div class="content-sub" id="user-interface">
                    <div>
user interface
                    </div>
                </div>
                <div class="content-sub" id="command-line-parameters">
                    <div>
command line parameters
                    </div>
                </div>
                <div class="content-sub" id="download-url">
                    <div>
download url
                    </div>
                </div>
                <div class="content-sub" id="download-list">
                    <div>
download files list
                    </div>
                </div>
                <div class="content-sub" id="upload-url">
                    <div>
upload url
                    </div>
                </div>
                <div class="content-sub" id="quit">
                    <div>
quit
                    </div>
                </div>
                <div class="content-sub" id="launch">
                    <div>
launch
                    </div>
                </div>
                <div class="content-heading" id="example-useage">
                    <div>
example useage
                    </div>
                </div>
                <div class="content-sub" id="upload-download-file-cwd">
                    <div>
upload&#x2F;download files the current directory
                    </div>
                </div>
                <div class="content-sub" id="upload-download-file-cwd-port">
                    <div>
upload&#x2F;download files in the current directory using port 4000
                    </div>
                </div>
                <div class="content-sub" id="download-txt-node-js">
                    <div>
download a txt file in node.js
                    </div>
                </div>
                <div class="content-sub" id="download-large-binary-node-js">
                    <div>
download a large binary file in node.js
                    </div>
                </div>
                <div class="content-sub" id="download-all-files-node-js">
                    <div>
download all files in a directory in node.js
                    </div>
                </div>
                <div class="content-sub" id="upload-file-node-js">
                    <div>
upload a file in node.js
                    </div>
                </div>
                <div class="content-sub" id="upload-large-binary-node-js">
                    <div>
upload a large binary file in node.js
                    </div>
                </div>
                <div class="content-sub" id="upload-file-browser">
                    <div>
upload a file from the browser
                    </div>
                </div>
                <div class="content-sub" id="curl">
                    <div>
download a file with curl
                    </div>
                </div>
                <div class="content-sub" id="alternate-directory">
                    <div>
serving files from an alternate directory
                    </div>
                </div>
                <div class="content-sub" id="standalone">
                    <div>
single file http-file-upload.js
                    </div>
                </div>
                <div class="content-sub" id="update-https-cert">
                    <div>
update https certificate
                    </div>
                </div>
                <div class="content-sub" id="http">
                    <div>
using http
                    </div>
                </div>
                <div class="content-heading" id="alternate-install">
                    <div>
alternate installation methods
                    </div>
                </div>
                <div class="content-sub" id="npm-local">
                    <div>
npm local install
                    </div>
                </div>
                <div class="content-sub" id="github">
                    <div>
install from github
                    </div>
                </div>
                <div class="content-sub" id="system-path">
                    <div>
system path environment variable
                    </div>
                </div>
                <div class="content-heading" id="feedback">
                    <div>
feedback
                    </div>
                </div>
                <div class="content-sub" id="stackoverflow">
                    <div>
stackoverflow chat
                    </div>
                </div>
                <div class="content-sub" id="email">
                    <div>
email
                    </div>
                </div>
                <div class="content-heading" id="links">
                    <div>
links
                    </div>
                </div>
                <div class="content-heading" id="other-works">
                    <div>
other interesting works
                    </div>
                </div>
            </div>
        </div>
        <div id="scroll">
            <div id="center" style="">
                <div id="description">
                    <h3 style="" class="heading target" id="http-file-upload">
http-file-upload
                    </h3>
                    <section style="margin-top: 0px;">
                        <div>
                            <i>
http-file-upload
                            </i>
is a http server whose only function is to upload and download files ( of any size )
                        </div>
                        <div style="margin-top: 10px;">
the http server has been designed as a single, no dependency, file for ease of use and portability
                        </div>
                        <div style="margin-top: 10px;">
                            <div>
files can be uploaded and downloaded
                            </div>
                            <ul>
                                <li>
using the built browser interface
                                </li>
                                <li>
by a http request, such as those made through node.js, php, curl, python, c++, c#, java
                                </li>
                            </ul>
                        </div>
                    </section>
                </div>
                <div id="install" class="margin target">
                    <h3 class="heading" style="">
install
                    </h3>
                    <section style="">
                        <div style="" id="npm-global" class="target">
                            <h4 style="margin-top: 0px;" class="sub-title">
npm global installation
                            </h4>
                            <div style="" class="sub-section">
                                <div>
recommended way to install
                                </div>
                                <code class="code">
npm install http-file-upload -g
                                </code>
                                <div>
                                    <i>
http-file-upload
                                    </i>
can then be run from anywhere on the file system by entering on the command line
                                </div>
                                <code class="code">
http-file-upload -version
                                </code>
                                <br />
                                <div>
                                    <div>
note :
                                        <b>
windows powershell users
                                        </b>
                                    </div>
                                    <div>
running powershell scripts are disabled by default
                                    </div>
                                    <div>
to get the script to run normally in powershell users will have to delete
                                        <span class="code-inline">
http-file-upload.ps1
                                        </span>
file from the default npm script installation directory this is usually
                                    </div>
                                </div>
                                <code class="code">
c:&#x2F;users&#x2F;&lt;user&gt;&#x2F;AppData&#x2F;Roaming&#x2F;npm&#x2F;
                                </code>
                                <div>
or launch the program using
                                </div>
                                <code class="code">
http-file-upload.cmd -version
                                </code>
                            </div>
                        </div>
                        <div id="node-x" style="" class="target">
                            <h4 class="sub-title">
node-x
                            </h4>
                            <div class="sub-section">
                                <div>
i also have another utility for running node.js scripts :
                                    <a href="#" title="no yet implemented" style="color: blue;">
node-x
                                    </a>
                                    <div title="coming soon" style="height: 50px; border: 1px solid lightgray; width: 150px; display: flex; justify-content: center; align-items: center; cursor: pointer; margin-top: 10px;">
npm : node-x
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
install locally with npm
                                </div>
                                <code class="code">
npm install http-file-upload
                                </code>
                                <div>
if the directory is not already accessible to node-x, add the current directory
                                </div>
                                <code class="code">
node-x -add
                                </code>
                                <div>
then run from anywhere on the command line with
                                </div>
                                <code class="code">
node-x http-file-upload.js -version
                                </code>
                            </div>
                        </div>
                        <div style="margin-top: 40px;">
see also
                            <a href="#alternate-install" style="color: blue;">
alternative installation methods
                            </a>
below
                        </div>
                    </section>
                </div>
                <div id="uninstall" class="margin target">
                    <h3 class="heading" style="" id="uninstall">
uninstall
                    </h3>
                    <section>
                        <div id="uninstall-npm-global" class="target">
                            <div style="font-weight: bold; margin-top: 0px;" class="sub-title">
npm global installation
                            </div>
                            <div class="sub-section">
                                <code class="code">
npm uninstall http-file-upload -g
                                </code>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="operation" class="margin target">
                    <h3 class="heading" style="">
operation
                    </h3>
                    <section>
                        <div id="nic-port" class="target">
                            <div class="sub-title" style="margin-top: 0px;">
network interface &#x2F; port
                            </div>
                            <div class="sub-section">
                                <div>
the server listens on all network interfaces
                                </div>
                                <div>
the default port is 3000
                                </div>
                            </div>
                        </div>
                        <div id="user-interface" class="target">
                            <div class="sub-title">
user interface
                            </div>
                            <div class="sub-section">
                                <div style="margin-top: 10px;">
the built in user interface is accessible, on all network interfaces
                                </div>
                                <a href="https://127.0.0.1:3000/" style="color: blue; display: block;">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;
                                </a>
                                <a href="https://127.0.0.1:3000/hello" style="color: blue; display: block;">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;hello
                                </a>
                            </div>
                        </div>
                        <div id="command-line-parameters" class="target">
                            <div class="sub-title">
command line parameters
                            </div>
                            <div class="sub-section">
                                <div style="margin-top: 20px;">
                                    <i>
http-file-upload
                                    </i>
supports the following command line parameters
                                </div>
                                <div>
the parameters can be specified in any order, with or without the dash or with a double dash
                                </div>
                                <table style="">
                                    <tbody>
                                        <tr id="port">
                                            <td style="width: 120px;">
-p | -port
                                            </td>
                                            <td style="width: 180px;">
&lt;port&gt;
                                            </td>
                                            <td>
sets the port the server listens on
                                            </td>
                                        </tr>
                                        <tr id="dir">
                                            <td>
-d | -dir
                                            </td>
                                            <td>
                                                <div>
&lt;dir&gt;
                                                </div>
                                            </td>
                                            <td>
sets a directory to put new uploads or where to find files for download, its relative to the serving directory, if the directory does not exist it is created
                                            </td>
                                        </tr>
                                        <tr id="cwd">
                                            <td>
-cwd
                                            </td>
                                            <td>
&lt;directory&gt;
                                            </td>
                                            <td>
sets the current working directory for the script
                                            </td>
                                        </tr>
                                        <tr id="https">
                                            <td>
-https | -http
                                            </td>
                                            <td>
                                            </td>
                                            <td>
set whether the server uses https ( default ) or http
                                            </td>
                                        </tr>
                                        <tr id="cert">
                                            <td>
-cert
                                            </td>
                                            <td>
&lt;cert-file&gt; &lt;key-file&gt;
                                            </td>
                                            <td>
specify a public certificate to use, pem format, the current certificate and key will be replaced and written to the file
                                                <br />
                                                <a href="https://javascript-2020.github.io/utils/generate-https-certificate/generate-https-certificate.html" style="color: blue;">
generate https certificates
                                                </a>
                                            </td>
                                        </tr>
                                        <tr id="version">
                                            <td>
-v | -version
                                            </td>
                                            <td>
                                            </td>
                                            <td>
prints the current version of the program
                                            </td>
                                        </tr>
                                        <tr id="help">
                                            <td>
-h | -help
                                            </td>
                                            <td>
                                            </td>
                                            <td>
command line quick help
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="download-url" class="target">
                            <div class="sub-title">
download url
                            </div>
                            <div class="sub-section">
                                <div>
download a file using a http request at url
                                </div>
                                <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;download?&lt;filename&gt;
                                </code>
                            </div>
                        </div>
                        <div id="download-list" class="target">
                            <div class="sub-title">
download files list
                            </div>
                            <div class="sub-section">
                                <div>
                                    <span>
a list of all files available to download is available from the following url, data in JSON format is returned
                                    </span>
                                </div>
                                <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;download-list

{files:[&quot;a.txt&quot;,&quot;b.txt&quot;]}
                                </code>
                            </div>
                        </div>
                        <div id="upload-url" class="target">
                            <div class="sub-title">
upload url
                            </div>
                            <div class="sub-section">
                                <span>
upload a file to this url using a http request, the upload body must be a binary file
                                </span>
                                <code class="code">
https:&#x2F;&#x2F;127.0.0.1:3000&#x2F;upload?&lt;filename&gt;
                                </code>
                            </div>
                        </div>
                        <div id="quit" class="target">
                            <div class="sub-title">
quit
                            </div>
                            <div class="sub-section">
                                <div>
                                    <i>
http-file-upload
                                    </i>
can be quit from the command line by pressing
                                </div>
                                <code class="code">
escape &#x2F; q &#x2F; ctrl-c
                                </code>
                                <div>
or by using the quit icon in the built in user interface
                                </div>
                            </div>
                        </div>
                        <div id="launch" class="target">
                            <div class="sub-title">
launch
                            </div>
                            <div class="sub-section">
                                <div>
if
                                    <i>
http-file-upload
                                    </i>
                                    <span>
is accessible globally, and you have some files you want to access over http in a directory
                                    </span>
                                    <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                    </span>
                                </div>
                                <ol>
                                    <li>
change to directory
                                        <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                        </span>
                                    </li>
                                    <li>
type
                                        <span class="code-inline">
http-file-upload
                                        </span>
press
                                        <kbd>
enter
                                        </kbd>
                                    </li>
                                </ol>
                                <ul style="">
                                    <li>
                                        <div>
open a web browser at
                                            <a href="https://localhost:3000/" style="color: blue;">
https:&#x2F;&#x2F;localhost:3000&#x2F;
                                            </a>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
perform a http request
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="example-useage" class="margin target">
                    <h3 class="heading" style="">
example useage
                    </h3>
                    <section>
                        <div id="upload-download-file-cwd" class="target">
                            <div class="sub-title" style="margin-top: 0px;">
upload&#x2F;download files in the current directory
                            </div>
                            <div class="sub-section">
                                <code class="code">
http-file-upload
                                </code>
                            </div>
                        </div>
                        <div id="upload-download-file-cwd-port" class="target">
                            <div class="sub-title">
upload&#x2F;download files in the current directory using port 4000
                            </div>
                            <div class="sub-section">
                                <code class="code">
http-file-upload -p 4000
                                </code>
                            </div>
                        </div>
                        <div id="download-txt-node-js" class="target">
                            <div class="sub-title">
download a txt file in node.js
                            </div>
                            <div class="sub-section">
                                <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;download?myfile.js&#39;;
var opts    = {rejectUnauthorized:false};

require(&#39;https&#39;).get(url,opts,async res=&gt;{

  &#x2F;&#x2F; node &gt;v20
  
      var body    = &#39;&#39;;
      for await(data of res)body   += data;
      console.log(body);   

  
  &#x2F;&#x2F; not using for await ...
  
      var body  = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
});
                                </code>
                            </div>
                        </div>
                        <div id="download-large-binary-node-js" class="target">
                            <div class="sub-title">
download a large binary file in node.js
                            </div>
                            <div class="sub-section">
                                <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;download?video.mp4&#39;;
var opts    = {rejectUnauthorized:false};

require(&#39;https&#39;).get(url,opts,async res=&gt;{

      var fd    = require(&#39;fs&#39;).createWriteStream(&#39;&#x2F;tmp&#x2F;video.mp4&#39;);
      res.pipe(fd);
  
});
                                </code>
                            </div>
                        </div>
                        <div id="download-all-files-node-js" class="target">
                            <div class="sub-title">
download all files in a directory in node.js
                            </div>
                            <div class="sub-section">
                                <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;&#39;;
var opts    = {rejectUnauthorized:false};
var https   = require(&#39;https&#39;);

https.get(`${url}download-list`,opts,async res=&gt;{

      var body    = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;{
      
            var json    = JSON.parse(body);
            json.files.forEach(file=&gt;{
            
                  https.get(`${url}download?${file}`,opts,res=&gt;{
                  
                        var fd    = fs.createWriteStream(file);
                        res.pipe(fd);
                    
                  });
              
            });
            
      });
  
});
                                </code>
                            </div>
                        </div>
                        <div id="upload-file-node-js" class="target">
                            <div class="sub-title">
upload a file in node.js
                            </div>
                            <div class="sub-section">
                                <code class="code">
var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;upload?my-file.txt&#39;;
var body    = require(&#39;fs&#39;).readFileSync(&#39;my-file.txt&#39;);

var req     = require(&#39;https&#39;).request(url,{method:&#39;post&#39;,rejectUnauthorized:false},rec);
req.write(body);
req.end();

req.on(&#39;error&#39;, function(err){
      console.log(err);
});

async function rec(res){

      var body = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
}&#x2F;&#x2F;rec
                                </code>
                            </div>
                        </div>
                        <div id="upload-large-binary-node-js" class="target">
                            <div class="sub-title">
upload a large binary file in node.js
                            </div>
                            <div class="sub-section">
                                <code class="code">
var fd      = require(&#39;fs&#39;).createReadStream(&#39;video.mp4&#39;);

var url     = &#39;https:&#x2F;&#x2F;localhost:3000&#x2F;upload?video.mp4&#39;;
var opts    = {method:&#39;post&#39;,rejectUnauthorized:false};

var req     = require(&#39;https&#39;).request(url,opts,rec);
req.on(&#39;error&#39;,err=&gt;console.log(err));
fd.pipe(req);


async function rec(res){

      var body = &#39;&#39;;
      res.on(&#39;data&#39;,data=&gt;body+=data);
      res.on(&#39;end&#39;,()=&gt;console.log(body));
      
}&#x2F;&#x2F;rec
                                </code>
                            </div>
                        </div>
                        <div id="upload-file-browser" class="target">
                            <div class="sub-title">
upload a file from the browser
                            </div>
                            <div class="sub-section">
                                <div>
remember to accept the server cert in the browser
                                </div>
                                <code class="code">
var input         = document.createElement(&#39;input&#39;);
input.type        = &#39;file&#39;;
input.onchange    = onchange;
input.click();

async function onchange(e){

      var file    = input.files[0];
      var url     = `https:&#x2F;&#x2F;localhost:3000&#x2F;upload?${file.name}`;
      var res     = await fetch(url,{method:&#39;post&#39;,body:file});
      var txt     = await res.text();
      console.log(txt);
      
}&#x2F;&#x2F;onchange
                                </code>
                            </div>
                        </div>
                        <div id="curl" class="target">
                            <div class="sub-title">
download a file with curl
                            </div>
                            <div class="sub-section">
                                <code class="code">
curl --insecure https:&#x2F;&#x2F;localhost:3000&#x2F;download?my-file.txt
                                </code>
                            </div>
                        </div>
                        <div id="alternate-directory" class="target">
                            <div class="sub-title">
serving files from an alternate directory
                            </div>
                            <div class="sub-section">
                                <div>
if you installed
                                    <i>
http-file-upload
                                    </i>
                                    <span>
locally with npm at
                                    </span>
                                    <span class="code-inline">
&#x2F;work&#x2F;http-file-upload&#x2F;
                                    </span>
                                    <span>
and wish to access files at
                                        <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                        </span>
                                    </span>
                                </div>
                                <code class="code">
npx http-file-upload -cwd &#x2F;work&#x2F;tmp&#x2F;
                                </code>
                            </div>
                        </div>
                        <div id="standalone" class="target">
                            <div class="sub-title">
single file http-file-upload.js
                            </div>
                            <div class="sub-section">
                                <div>
                                    <span class="code-inline">
&#x2F;work&#x2F;http-file-upload&#x2F;
                                    </span>
                                    <span>
and wish to access files at
                                    </span>
                                    <span class="code-inline">
&#x2F;work&#x2F;tmp&#x2F;
                                    </span>
                                </div>
                                <code class="code">
node http-file-upload -cwd &#x2F;work&#x2F;tmp&#x2F;
                                </code>
                            </div>
                        </div>
                        <div id="update-https-cert" class="target">
                            <div class="sub-title">
update https certificate
                            </div>
                            <div class="sub-section">
                                <div>
you can download certificates from
                                    <a href="https://javascript-2020.github.io/utils/generate-https-certificate/generate-https-certificate.html" style="color: blue;">
generate https certificates
                                    </a>
                                </div>
                                <div>
the files can be given in either order and the key and cert must be pem encoded
                                </div>
                                <code class="code">
http-file-upload -cert server-cert.pem private-key.pem
                                </code>
                            </div>
                        </div>
                        <div id="http" class="target">
                            <div class="sub-title">
using http
                            </div>
                            <div class="sub-section">
                                <code class="code">
http-file-upload -http
                                </code>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="alternate-install" class="margin target">
                    <h3 class="heading" style="">
alternate installation methods
                    </h3>
                    <section>
                        <div id="npm-local" class="target">
                            <h4 class="sub-title" style="margin-top: 0px;">
npm local install
                            </h4>
                            <div class="sub-section">
                                <code class="code">
npm install http-file-upload
                                </code>
                                <div>
this will download
                                    <i>
http-file-upload
                                    </i>
to
                                    <span class="code-inline">
.&#x2F;node_modules&#x2F;http-file-upload
                                    </span>
                                </div>
                                <div>
                                    <i>
http-file-upload
                                    </i>
can then be run using the command, from the directory which you issued the npm install command
                                </div>
                                <code class="code">
npx http-file-upload -version
                                </code>
                            </div>
                        </div>
                        <div id="github" class="target">
                            <h4 class="sub-title">
install from github
                            </h4>
                            <div class="sub-section">
                                <div id="zip-file">
download the project files as a zip file from github
                                    <div id="http-file-upload-zip" style="display: inline-flex; align-items: center; border: 1px solid lightgray; padding: 0px 5px; border-radius: 3px; cursor: pointer; color: blue;">
                                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAcRJREFUOE/tkz9IQlEUxr+r0pRBROHg8J6LQUNBQxBYQ6S4VCC9iAh0sblaioZsiFrKOZeCiOiFUC3yjIYSBAchhyAJ9A0OUkSQTeF7t96zP768YUVL0N3Od8753fPdwyWUUoo6h4SIXkFDdUtBvgRcegEu/gMZb/8H33DrfAsWkwVCh4AGc4NuinzY8qPyCPFCRFktw9/lNxg3WD7LnaF/ux8mYkKPrQfJYJIJ7I30IlVMQaUqTidP0efoe4MagIqqoHujG5nrjF7g5tyIjkdhXbHqcWm+BN+uD3E5rsedbZ1IT6VhNpnZQE0t3hch7AtIFBLPXwPwODyQ8pLe4OE9kHISQACX3QVxVIStyfa55ddM9iaLkb0RXN5eMj9le0s7DsYO4Gx11uTJ1e0VXU4sY3N405CU72QEj4I4lo8N+iA3iMhQBFwzZ9ADhwEsuBaehw9pxgC+kUduNlcD9e543ybVJotNxGpgjjUH8g/5ygJfgZyVQ36mIlYfzf7cyZwurQ6sMm3y6zzkkvw1oFalUEUvNpP3bVZf+m0gczNVIhNoIRbYG+31epn5wkMBZVo2Wv4RidFEwskwnY5P/wov7A7jCRah4mR5BNdrAAAAAElFTkSuQmCC" style="border-radius: 3px; border: 1px solid lightgray; box-sizing: border-box; width: 12px; height: 12px; margin-right: 3px;" />
http-file-upload.zip
                                    </div>
                                    <div>
unzip the file, then either run locally or add the launch script to the system path
                                    </div>
                                </div>
                                <div style="margin-top: 10px;" id="single-file">
download the single file
                                    <div href="#" id="http-file-upload-js" style="display: inline-flex; align-items: center; border: 1px solid lightgray; padding: 0px 5px; border-radius: 3px; cursor: pointer; color: blue;">
                                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAcRJREFUOE/tkz9IQlEUxr+r0pRBROHg8J6LQUNBQxBYQ6S4VCC9iAh0sblaioZsiFrKOZeCiOiFUC3yjIYSBAchhyAJ9A0OUkSQTeF7t96zP768YUVL0N3Od8753fPdwyWUUoo6h4SIXkFDdUtBvgRcegEu/gMZb/8H33DrfAsWkwVCh4AGc4NuinzY8qPyCPFCRFktw9/lNxg3WD7LnaF/ux8mYkKPrQfJYJIJ7I30IlVMQaUqTidP0efoe4MagIqqoHujG5nrjF7g5tyIjkdhXbHqcWm+BN+uD3E5rsedbZ1IT6VhNpnZQE0t3hch7AtIFBLPXwPwODyQ8pLe4OE9kHISQACX3QVxVIStyfa55ddM9iaLkb0RXN5eMj9le0s7DsYO4Gx11uTJ1e0VXU4sY3N405CU72QEj4I4lo8N+iA3iMhQBFwzZ9ADhwEsuBaehw9pxgC+kUduNlcD9e543ybVJotNxGpgjjUH8g/5ygJfgZyVQ36mIlYfzf7cyZwurQ6sMm3y6zzkkvw1oFalUEUvNpP3bVZf+m0gczNVIhNoIRbYG+31epn5wkMBZVo2Wv4RidFEwskwnY5P/wov7A7jCRah4mR5BNdrAAAAAElFTkSuQmCC" style="border-radius: 3px; border: 1px solid lightgray; box-sizing: border-box; width: 12px; height: 12px; margin-right: 3px;" />
http-file-upload.js
                                    </div>
                                    <div>
                                        <i>
http-file-upload
                                        </i>
can then be run by
                                    </div>
                                    <code class="code">
node http-file-upload -version
                                    </code>
                                </div>
                            </div>
                        </div>
                        <div id="system-path" class="target">
                            <h4 class="sub-title">
system path environment variable
                            </h4>
                            <div class="sub-section">
                                <div style="margin-top: 20px;">
if you would like
                                    <i>
http-file-upload
                                    </i>
                                    <span>
to be accessible from anywhere on the file system, the directory
                                    </span>
                                    <code class="code">
http-file-upload&#x2F;ext&#x2F;
                                    </code>
should be added to the system path,
                                    <i>
http-file-upload
                                    </i>
                                    <span>
comes with the following shell scripts to launch the process :
                                    </span>
                                </div>
                                <code class="code">
windows ............ http-file-upload&#x2F;ext&#x2F;http-file-upload.bat
mac ................ http-file-upload&#x2F;ext&#x2F;http-file-upload.sh
linux .............. http-file-upload&#x2F;ext&#x2F;http-file-upload.sh
                                </code>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="feedback" class="margin target">
                    <h3 class="heading" style="">
feedback
                    </h3>
                    <section style="">
                        <div id="stackoverflow" class="target">
                            <h4 class="sub-title" style="margin-top: 0px;">
stackoverflow chat
                            </h4>
                            <div class="sub-section">
                                <div>
im usually available in the
                                    <a href="https://chat.stackoverflow.com/rooms/17/javascript" style="color: blue;">
stackoverflow javascript chat room
                                    </a>
user matt, come and say hi, id love to hear from you
                                </div>
                            </div>
                        </div>
                        <div id="email" class="target">
                            <h4 class="sub-title">
email
                            </h4>
                            <div class="sub-section">
or by email
                                <a href="mailto:javascript.12.03.2024@gmail.com">
javascript.12.03.2024@gmail.com
                                </a>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="links" class="margin target">
                    <h3 class="heading" style="">
links
                    </h3>
                    <section style="">
                        <div id="github" style="">
                            <a href="https://github.com/javascript-2020/code-projects/tree/main/http-file-upload" style="border: 1px solid lightgray; padding: 7px; display: inline-flex; border-radius: 5px;">
                                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" style="margin-right: 10px;" />
                                <span style="color: blue;">
https:&#x2F;&#x2F;github.com&#x2F;javascript-2020&#x2F;code-projects&#x2F;tree&#x2F;main&#x2F;http-file-upload&#x2F;
                                </span>
                            </a>
                        </div>
                        <div id="npm" style="margin-top: 20px;">
                            <a href="https://www.npmjs.com/package/http-file-upload">
                                <img src="https://nodei.co/npm/http-file-upload.png" />
                            </a>
                        </div>
                    </section>
                </div>
                <div id="other-works" class="margin target">
                    <h3 class="heading" style="margin-top: 40px;">
                        <span style="">
other interesting works
                        </span>
                    </h3>
                    <section style="">
                        <div id="github" style="">
                            <a href="https://github.com/javascript-2020/code-projects/tree/main" style="border: 1px solid lightgray; padding: 7px; display: inline-flex; border-radius: 5px;">
                                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" style="margin-right: 10px;" />
                                <span style="color: blue;">
https:&#x2F;&#x2F;github.com&#x2F;javascript-2020&#x2F;code-projects&#x2F;tree&#x2F;main
                                </span>
                            </a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <div id="ftr" style="height: 50px; margin-top: 20px;">
        </div>
    </body>
    <script style="display: block;" src="/js/website.js" id="website-js">
    </script>
</html>




<html>

      <head>
    
            <base href='https://javascript-2020.github.io/utils/github/download-a-directory-from-a-github-repository/'>
            <link rel='shortcut icon' type='image/x-icon' href='images/favicon.ico'>
            
            <title>download github directory</title>
            
            
            <link rel=stylesheet href='/css/page.css' id=page>
            <script id='page' src='/js/page.js'></script>
            
            <style>
        
        h3 {
              margin                          : 0;
        }
      
        #values {
              display                     : grid;
              grid-template-columns       : auto 1fr;
              gap                         : 10px;
              align-items                 : center;
        }
        
        input {
              font-size                   : 16px;
              padding                     : 5px;
        }
        
        button {
              cursor                      : pointer;
              width                       : 300px;
              font-size                   : 16px;
              padding                     : 5px 10px;
        }
        
            </style>
        
        
            <script>
        
        var JSZip;
        
        (async()=>{
        
                JSZip   = (await import('https://cdn.jsdelivr.net/npm/jszip/+esm')).default;
                
        })();
        
        
            </script>
            
            
            
            <script>
        
        
        
        function initdom(){
          
                
              $('#url-paste').onclick       = async e=>{
              
                    var url           = await navigator.clipboard.readText();
                    $('#url').value   = url;
                    
              };//paste
              
              $('[value=parse]').onclick   = e=>{
              
                    var url               = $('#url').value;
                    url                   = parse(url);
                    
                    $('.owner').value     = url.owner;
                    $('.repo').value      = url.repo;
                    $('.branch').value    = url.branch;
                    $('.path').value      = url.path;
                    
              };
              
        }//initdom
                
                
                


        
        async function download(){
        
              var $         = sel=>document.querySelector(`.${sel}`).value;
              var owner     = $('.owner');
              var repo      = $('.repo');
              var branch    = $('.branch');
              var path      = $('.path');
              
              if(path.slice(-1)!='/')path+='/';
              var file    = `${path.split('/').filter(Boolean).at(-1)||repo}.zip`;
              var zip     = new JSZip();
              
              var url     = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=true`;
              var json    = await fetch(url).then(res=>res.json());
              
              await Promise.all(json.tree.map(async item=>{
              
                    if(!item.path.startsWith(path))return;
                    
                    var fn    = item.path.slice(path.length);
                    if(item.type=='tree'){
                          zip.folder(fn);
                    }else{
                          var res     = await fetch(item.url);
                          var blob    = await res.blob();
                          zip.file(fn,blob);
                    }
                    
              }));
              
              zip.generateAsync({type:'blob'}).then(blob=>{
              
                    var url         = window.URL.createObjectURL(blob);
                    var a           = document.createElement('a');
                    a.href          = url;
                    a.download      = file;
                    a.click();
                    
              });
              
        }//download
        
            </script>
        
      </head>
    
      <body>
    
            <hdr-grp-api>
                  <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
                  <img class=title src='images/html-editor.png' style='top:-5px;height:55px'>
                  <span slot=date>30 Apr 2025</span>
            </hdr-grp-api>

        
            <div id=background style='position: fixed; z-index: -1'>
            </div>


        
            <div id=scroll>
            
                  <div id=center>
                  
                        <h3 class=heading style='margin-bottom: 40px'>
                              download a directory from a github repository
                        </h3>
        
                        
                        <section>
                        
                              <div id=parse style='margin-bottom: 40px'>
                                  <div style='margin-bottom: 10px'>
                                      parse url
                                      <span style='margin-left: 20px'>
                                            ex :
                                      </span>
                                      <span style='margin-left: 10px'>
                                            https:&#x2F;&#x2F;github.com &#x2F; owner &#x2F; repo &#x2F; tree &#x2F; branch &#x2F; path
                                      </span>
                                  </div>
                                  
                                  <div style='display: flex; align-items: center'>
                                      <img id=url-paste style='width: 30px; height: 30px; cursor: pointer; margin-right: 10px' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAYxJREFUOE/NlLFKw1AUhs9thDSSNhYEC1LIdWj2bl07OPcJxMUXMFsHjUsXrdBdB3HwARxLwIIQXJxcUooHbCOEutRKh9AYucXGtknTGhw8Y3Lud89//stP4I+LRPEopdb3/31EbKxydyhQluVjQoiaTCZTPM9Dv98Hz/M0nufPTdMcRIF9oKIoKcdx3ifNHMeBJEkgiiJYlgWu605zsohoh4F9IJsqs+5pp+UeHNxsgSAIQMiPgOFwCGflHjTbAtw+ia+IuL0UmE1/asbhyxgYVuyyq4c01JuZ3wGjdlS/2/hnQNcDePvg/KEvDQkuDMkejUYF9rHT6TBzfMdmTJnscFry3nUW7p+FqC00EHF30rAUuHNCoVqtQrFYDEANw4BKpQKI6HNWBtZqtQBQVdX4QNM0A0BFUeIDmbT5YquILXmRK7GBsSZcSxBtU5wJAbAH3NjlfD4fGLLVai2WzLpZQMyfIoQclUqlRC6XCwC73S7ouh7+bBbtiFLKkuIx4mUXpqMsMrFXSej5ni+XXuAVg6oGswAAAABJRU5ErkJggg=='>
                                      <input id=url style='flex: 1 1 0%'>
                                      <input id='parse' style='cursor: pointer; font-size: 16px; box-sizing: border-box; min-width: 60px; margin-left: 10px' type=button value=parse>
                                  </div>
                                  
                              </div>
                            
                            <div id=values>
                            
                                <div>
                                      owner
                                </div>
                                <input class=owner>
                                </input>
                                <div>
                                      repo
                                </div>
                                <input class=repo>
                                </input>
                                <div>
                                      branch
                                </div>
                                <input class=branch>
                                </input>
                                <div>
                                      path
                                </div>
                                <input class=path>
                                </input>
                            </div>
                            
                            <button style='margin-top: 20px' onclick='download()'>
                                  download
                            </button>
                            
                        </section>
      
                      
                  </div center>
                
                
                
            </div scroll>
        
        
        
    </body>
</html>
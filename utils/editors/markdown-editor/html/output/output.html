

<output-root>

      <template shadowrootmode=open>
      
            <style>
            
                  #output {height:100%;border:2px solid lightgray;box-sizing:border-box;padding:10px}
                  
            </style>
            
            <div id=output>
            </div>
            
      </template>
      
      <script>
      
            function output(){
                                                                                console.log('output');
              var obj   = {};

                  obj.initmod=function(){
                  }//initmod
                  
              //vars:-
                            
                  var src             = 'https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js';
                  var resolve,load    = new Promise(res=>resolve=res);
                  
                  var root;
                  var shadow;
                  
                  var output;
                  
              //:
              
                  obj.init=function(){
                  }//init
                  
              //:
              
                  obj.initdom=function(rootnode){
                  
                        root                = $.$(rootnode,'output-root');
                        shadow              = root.shadowRoot;
                        
                        output              = $(shadow,'#output');

                        
                        var script          = document.createElement('script');
                        script.src          = src;
                        script.onload       = onload;
                        document.head.append(script);
                        
                        
                  }//initdom
                  
                  
                  function onload(){
                  
                        md    = markdownit();
                        resolve();
                        
                  }//onload
                  
                  
                  obj.display=async function(txt){

                        await load;
                        
                        var html            = md.render(txt);
                        output.innerHTML    = html;
                        
                  }//show
                  
                  
              return obj;
              
            }//output
            
      </script>
      
</output-root>


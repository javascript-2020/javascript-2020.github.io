

<output-md v2.0>

      <template shadowrootmode=open>
      
            <link rel=stylesheet href='css/github-markdown-light.css'>
            
            <style>
            
  #root
    {height:100%;display:flex;flex-direction:column;gap:10px}
    
  #hdr
    {display:flex}
  .radio
    {border:1px solid lightgray;padding:2px 10px;border-radius:5px;cursor:pointer;display:flex;align-items:center}
    
    
  #output
    {height:100%;border:2px solid lightgray;box-sizing:border-box;padding:10px}
    
            </style>
            
            <div id=root>
            
                  <div id=hdr>
                        <span id=html class=radio>
                              <input type=checkbox checked>
                              html
                        </span>
                        
                  </div>
                  
                  <div id=output class=markdown-body>
                  </div>
                  
            </div>
            
      </template>
      
      <script>
      
(function output_md({mod,dom,host}){
                                                                    console.log('output');
  var obj   = {
        version   : 'v2.0',
  };
  
      var $
      ;
      
      obj.initmod   = function(params){
      
            $       = params.$;
            
      }//initmod
      
      
  //vars:-
  
      var md;
      
      var shadow;
      var output;
      var chk         = {};
      
      
  //:
  
  
      obj.init    = async function(){
      
            await libs();
            
      }//init
      
      
      
      function libs(){
      
            var resolve,promise=new Promise(res=>resolve=res);
            
            var script      = document.createElement('script');
            script.src      = 'https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js';
            script.onload   = onload;
            document.head.append(script);
            
            return promise;
            
            
            function onload(){
            
                  resolve();
                  
            }//onload
            
      }//libs
      
      
  //:
  
  
      obj.initdom   = function(rootnode){
      
            shadow              = host.shadowRoot;
            
            var hdr             = $(shadow,'#hdr');
            chk.html            = $.chkbox(shadow,'#html');
            
            output              = $(shadow,'#output');
            
            
      }//initdom
      
      
  //:
  
  
  
      obj.display   = async function(txt){
                                                                                debug('display');
            await libs;
            
            var opts            = {};
            opts.html           = chk.html.checked;
                                                                                debug(opts);
            var md              = markdownit(opts);
            var html            = md.render(txt);
            
            output.innerHTML    = html;
            
      }//show
      
      
      obj.horiz   = function(){
      
            host.style.width    = '100%';
            host.style.height   = '50%';
            
      }//horiz
      
      
      obj.vert    = function(){
      
            host.style.width    = '50%';
            host.style.height   = '100%';
            
      }//vert
      
      
      
      
  return obj;
  
//output_md
})


      </script>
      
</output-md>


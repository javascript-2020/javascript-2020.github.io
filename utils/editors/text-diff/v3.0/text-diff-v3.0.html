


<html>

      <head>
            <meta charset=utf-8>
            
            <title>
                  Text Diff
            </title>
            
            <meta name=description content='Compare and highlight differences between two text files instantly with this free online text-diff tool. Fast, secure, and easy to use—no downloads required'>
            
            <base href='https://ext-code.com/utils/editors/text-diff/'>
            <link rel=canonical href='https://ext-code.com/utils/editors/text-diff/text-diff.html'>
            
            <meta name=viewport content='width=device-width, initial-scale=1'>
            <link rel=icon type='image/png' href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAnFBMVEVHcEwAAAEHBg9gNqsEAwlXMZwUCyMAAAA1RJkAAAAAAAAAAAAfKFsAAAAdEDQAAAAAAAAAAAAKCRgkFEAAAABlObUVGz04SKIAAABBJHM+UbUAAAAAAAAAAAAvPYk0HV0AAAARFjIAAABPLI0AAAAAAAAmMW4aIUwAAAApNHYAAAAAAABnOrg/UbUAAAFAUrdoO7k7TKsMECVpO7uPyrl7AAAALHRSTlMA/P39//z95vzdQPb64fsWsCT9+17+/f3S+v41ju7++pz7UfsKd/r7KvzFaJeOgx8AAAGbSURBVCjPXZPttmswEEATgqqPolUUpUV7eq474tz3f7c7I47S/SPWshMzGTOMsbxO7Zm03rMP7h4IbUaAddravSXc3YIryu35ANzL8OYBwfT68KV0GSXDX+JCy5BE9oFs4OWT5j/jZJPnizaMP1bIWFvD92Gth52mPS6zbgtI54//nr48Jj/pjts5W/RwPRMRaK+B9MmxlvRJuzDzJN2V5fvypMcr8orglqDmjvOHrTUmNgzjmSzGBgj2RH7YZB6RxQeAM1GmXfvOfNyRTW7gHxW+4EXLbHFVVcOVIvh6r4gbE5Po+G33W/DxCb4h+16qDY1IsboQPV3FGUyyuhFPWjcdrH5h8enSuGqN7KV+jAypNKfkv+4nIgAwY7IY/5+Ui567xuLc1Hu0UWYg+kbvPaewUFeAvcWRSq50nvIuRC0zDpqPHLOVDr+hYKT7OONaFiOr2GEAdas0eqFtMmesgAB/gNLoj0a/0fcipP6zI1VRVRVpROVHU1e9XMBLBNuRKEXVGDNNJayPkTptBsq7fw4cjqM3k9bYrf8B50dH+JJaGO8AAAAASUVORK5CYII='>
            
            <script type='application/ld+json'>
                  {
                        "@context"              : "https://schema.org",
                        "@type"                 : "SoftwareApplication",
                        "name"                  : "Text Diff",
                        "url"                   : "https://ext-code.com/utils/editors/text-diff/text-diff.html",
                        "author"                : {"@type":"Person","name":"Matthew Richards"},
                        "description"           : "Compare and highlight differences between two text files instantly with this free online text-diff tool. Fast, secure, and easy to use—no downloads required",
                        "applicationCategory"   : "DeveloperApplication",
                        "operatingSystem"       : "All",
                        "browserRequirements"   : "Requires JavaScript-enabled browser",
                        "softwareVersion"       : "1.0.0",
                        "offers"                : {"@type":"Offer","price":"0","priceCurrency":"GBP"}
                  }
            </script>
            
            <script src='https://ajaxorg.github.io/ace-builds/src-noconflict/ace.js'></script>
            <script src='https://cdn.jsdelivr.net/npm/diff@latest/dist/diff.min.js'></script>
            
            
            <script src='https://libs.ext-code.com/js/dom/component/v2.0/component.js?hdr'></script>
            
            <script>
                                                                                console.log('text-diff-v3.0.html');
        var version='v2.0';
        var df=true,did='html'
        ;
        
        var hdr;
        var primary     = {};
        var secondary   = {};
        
        
        
  //:
  
  
        async function init(){
                                                                                  debug('init',version);
                                                                                  
                                                                                  
                                                                                  
                                                                                  
              hdr                       = mod['editors-hdr'];
              primary.filemod           = mod.file1;
              primary.editor            = mod.editor1;
              secondary.filemod         = mod.file2;
              secondary.editor          = mod.editor2;
              
              mod.base.add({});
              
              primary.filemod.initmod({complete:primary.complete});
              secondary.filemod.initmod({complete:secondary.complete});
              
              await mod.auto();
              
  //:
  
              hdr['page-source'].url('v3.0/text-diff-v3.0.html');
              
              window.onfocus            = ()=>primary.editor && primary.editor.focus();
              keydown.add(kd);
              //menu.on.close             = ()=>editor.focus();
              
              
              initdom(document.body);
              
              
        }//init
        
        
            </script>
            
            
            <link rel=stylesheet href='/utils/css/utils.css'>
            
            <style>
            
  :root
    {--red:rgba(209,153,153,0.5);--green:rgba(153,204,153,0.5)}
    
  html
    {height:100%;font-family:arial}
  body
    {display:flex;flex-direction:column;height:calc(100% - 40px);margin:20px;gap:10px}
    
  #output-hdr
    {display:flex;gap:10px;}
  #output-hdr>div
    {display:flex;gap:10px;align-items:center;border:1px solid lightgray;border-radius:5px;padding:3px 5px}
  [type=checkbox]
    {width:20px;height:20px;margin:0}
  [value=check]
    {flex:1}
    
  input
    {font-size:16px;padding:5px;cursor:pointer}
    
  #hdr
    {padding:5px 5px;height:30px;display:flex;align-items:center;gap:10px}
    
  .icon
    {border:1px solid gray;border-radius:3px;box-sizing:border-box;width:30px;height:30px;cursor:pointer}
  .spc
    {flex:1}
    
    
  #run
    {color:blue;font-weight:bold}
  #horiz
    {margin-left:50px;border:none}
  #vert
    {border:none}
    
    
    
  #main
    {display:flex;flex:1;margin:5px 0;gap:10px}
    
  #view1
    {flex:1;display:flex;flex-direction:column;border:1px solid var(--green);padding:5px;box-sizing:border-box}
    
  #view2
    {flex:1;display:flex;flex-direction:column;border:1px solid var(--red);padding:5px;box-sizing:border-box}
    
    
  #hdr
    {display:flex;align-items:center;padding:5px}
    
  #label
    {flex:1;text-align-center}
    
  web-editor
    {flex:1}
    
  #output
    {border:1px solid lightgray;padding:5px;box-sizing:border-box}
    
/*
  #output-hldr
    {flex:1;border:1px solid lightgray;overflow:auto;margin:0;padding:5px;box-sizing:border-box}
*/


  .red
    {position:absolute;background:var(--red);z-index:20}
  .green
    {position:absolute;background:var(--green);z-index:20}
    
    
            </style>
            
      </head>
      
      
      <body>
      
            <editors-hdr v2.0 component=grp>
                  <img slot=title src='images/text-diff.png' style='top:5px;height:45px'>
                  <h4 slot=version>v3.0</h4>
                  <time slot=date datetime=2026-01-24>24 Jan 2026</time>
            </editors-hdr>
            
            <div id=output-hdr>
                  <div>
                        show output
                        <input type=checkbox checked>
                  </div>
                  <input type=button value=check>
            </div>
            
            <div id=main>
                  <div id=view1>
                        <div id=hdr>
                              <file-mod id=file1 component></file-mod>
                              <div id=label>primary</div>
                        </div>
                        <web-editor id=editor1 component mode=text></web-editor>
                  </div>
                  
                  <div id=slider-1 style='width:10px;cursor:ew-resize'></div>
                  
                  <div id=view2>
                        <div id=hdr>
                              <file-mod id=file2 component></file-mod>
                              <div id=label>secondary</div>
                        </div>
                        <web-editor id=editor2 component mode=text></web-editor>
                  </div>
            </div>
            
            <div id=slider-2 style='height:10px;cursor:ns-resize'></div>
            
            
            <web-editor id=output component mode=text></web-editor>
            <!--
            <div id=output-hldr>
                  <web-editor id=output component></web-editor>
            </div>
            -->
            
            
            
            <log-mod component></log-mod>
            
            
            <checkbox-one-template>
                  <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
            </checkbox-one-template>
            
            
      </body>
      
      
      <script>
      
      
        var slider1     = {mode:'vert'};
        var slider2     = {mode:'horiz'};
        
        var ui          = {};
        ui.mode         = 'vert';
        
        
        var btn         = {};
        
        
  //:
  
  
        async function initdom(rootnode){
                                                                                debug('initdom');
              var root                                        = rootnode;
              
              $('#output-hdr [type=checkbox]').onclick        = btn['output-chk'];
              $('[value=check]').onclick                      = btn.check;
              
              
              var view1                                       = $('#view1');
              var view2                                       = $('#view2');
              var w                                           = view2.offsetWidth;
              view2.style.flex                                = 'none';
              view2.style.width                               = w+'px';
              
              
              var node                                        = $('#output');
              
              setTimeout(()=>{
              
                    var w                                     = node.offsetHeight;
                    node.style.flex                           = 'none';
                    node.style.height                         = w+'px';
                    
              },500);
              
              
              slider1.node                                    = $.slider('#view1','#slider-1','#view2',null,slider1);
              slider2.node                                    = $.slider('#main','#slider-2','#output',null,slider2);
              
              
              
              var style                                       = document.createElement('style');
              style.textContent   = `
                    .red
                      {position:absolute;background:var(--red);z-index:20}
                    .green
                      {position:absolute;background:var(--green);z-index:20}
              `;
              
              output.shadowRoot.append(style);
              
              
              
        }//initdom
        
        
  //:
  
  
        btn['output-chk']   = function(){
        
              var output    = $('#output');
              var chk       = $('#output-hdr [type=checkbox]');
              if(chk.checked){
                    output.style.display    = '';
              }else{
                    output.style.display    = 'none';
              }
              
        }//output-chk
        
        
        btn.check   = function(){
        
              check();
              
        }//check
        
        
  //:
  
  
        function kd(e){
        
              if(e.key=='Enter' && e.ctrlKey){
                    e.preventDefault();
                    run();
              }
              
              if(e.key==' ' && e.ctrlKey){
                    e.preventDefault();
                    menu.open();
              }
              
              if(e.key=='s' && e.ctrlKey){
                    e.preventDefault();
                    filemod.save();
              }
              
              if(e.key=='Delete' && e.ctrlKey){
                    e.preventDefault();
                    jsonblob.util.delete()
              }
              
        }//keydown
        
        
  //:
  
  
        primary.complete   = function(file){
        
              primary.editor.filename(file);
              primary.editor.filename.save.hide();
              primary.cur   = file;
              menu.close();
              primary.editor.focus();
              
        }//complete
        
        
        primary.complete.load   = async function(file,blob){
        
              var txt   = await blob.text();
              
              primary.editor.clear();
              primary.editor.setValue(txt,-1);
              primary.complete(file);
              
        }//complete.load
        
        
        primary.complete.save   = function(file,confirm=true){
        
              primary.complete(file);
              
              if(confirm){
                    log.green(file.filename,'saved');
              }
              
        }//save
        
        
        secondary.complete   = function(file){
        
              secondary.editor.filename(file);
              secondary.editor.filename.save.hide();
              secondary.cur   = file;
              menu.close();
              secondary.editor.focus();
              
        }//complete
        
        
        secondary.complete.load   = async function(file,blob){
        
              var txt   = await blob.text();
              
              secondary.editor.clear();
              secondary.editor.setValue(txt,-1);
              secondary.complete(file);
              
        }//complete.load
        
        
        secondary.complete.save   = function(file,confirm=true){
        
              secondary.complete(file);
              
              if(confirm){
                    log.green(file.filename,'saved');
              }
              
        }//save
        
        
        
        
        
/*

        function complete(file){
        
              editor.filename(file);
              editor.filename.save.hide();
              filemod.cur   = file;
              menu.close();
              editor.focus();
              
        }//complete
        
        
        complete.load   = function(file,txt){
        
              editor.clear();
              output.kill();
              editor.setValue(txt,-1);
              complete(file);
              
        }//complete.load
        
        
        complete.save   = function(file,confirm=true){
        
              complete(file);
              
              if(confirm){
                    log.green(file.filename,'saved');
              }
              
        }//save
        
*/



  //:
  
  
        function check(){
        
              var txt1        = primary.editor.getValue();
              var txt2        = secondary.editor.getValue();
              var d           = Diff.diffChars(txt2,txt1);
              console.log(d);
              
              var list    = [];
              var txt     = '';
              d.forEach(part=>{
              
                    var start   = txt.length;
                    txt        += part.value;
                    var end     = txt.length;
                    var color   = part.added ? 'green' : part.removed ? 'red' : 'grey';
                    if(color!='grey'){
                          list.push({start,end,color});
                    }
                    
              });
              
              output.editor.setValue(txt,-1);
              
              list.forEach(part=>{
              console.log(part);
                    var start   = output.editor.getSession().doc.indexToPosition(part.start);
                    var end     = output.editor.getSession().doc.indexToPosition(part.end);
                    var range   = new ace.Range(start.row,start.column,end.row,end.column);
                    console.log(range);
                    output.editor.getSession().addMarker(range,part.color,'text');
                    
              });
              
        }//check
        
        
        
        
        
      </script>
      
      
</html>







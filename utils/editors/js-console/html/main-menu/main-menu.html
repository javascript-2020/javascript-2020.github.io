


<main-menu style='position:relative'>

      <template shadowrootmode=open>
      
            <style>
            
  #icon
    {padding:3px;width:20px;background:buttonface;
      content:url('data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAt1BMVEVHcEwbmPYcgfMchvQbsfkay/wbtvkbnfccefMayfwbmfYch/QchvQbtfkbmfYa1P0ddfIcivQcl/Ycj/Ubp/gcmfYdbPEbrvkazPwcmfYbqfgayfwayPwbv/sbvvobsvkazPwbqvga0fwbvPobtvocjvUbofcbpvccfPMcgPMcgvMdafAdbfEckfUbtvka0PwcfPIaxvsbwfsbvPodb/EcnPYclvYckfUbpvccjPQdd/IbofcbrPiPy8D0AAAAMHRSTlMAA/79/v7+5ycVZ3Y3h0xhu9jp8kFeF9OkVfQOrZi+Mh1z/iUJQ+/dx4fOYq7hybzs5xU1AAABIklEQVQ4y+2Ux3aDMBBFpTR6M92AwYB7S6EG/v+7MsJJnBBKVsnGdwHozT1HQgxC6MrfEkiSM+Y4khSgUxhazLDHWGF4QveAO2gyLnGQ9QS4wcDaXGJYiPGegVnU50UzUvdgTsd7AfrMaEaqXvO+sfAAHP0uzz+SmhCfR7FwB5gdpm+SyoeHEJ5P67o2tbanmRBP5/iSgFkUxaplaisIv3kAu6yqihK/RiIF0ZJtT6NTaZpS9iWwm0D/uXB7kmXZ5LOgN0O7ayvEQ57nKtssCbMqDA5i9+YulLIsVQ5MzKnwqCz6Phev3AIcxhy5K3x/A/DbG2CzIdctP9RS9PrxnTU92KOYll8bZHqs7Wk5AcY9hIx9kuyN3/xuxm5nXA+df+cNJSAgjMbiFSoAAAAASUVORK5CYII=');
    }
  
  .menu
    {position:absolute;left:0;top:35px;}
            
            </style>
            
            <img id=icon class=icon>
            
            <div class=menu style='display:none'>      
                  <div id=clear class=menu-opt>clear</div>
                  <div id=new class=menu-opt>new</div>
                  <div id=fork class=menu-opt>fork</div>
                  <div class=menu-sep></div>
                  <div id=source class=menu-opt>js-console source code</div>
            </div>
            
      </template>



      <script>
            
mod.menu.main   = function(){

  var obj   = {};
  
      var menu,menumod,editor,filemod
      ;
      
      obj.initmod   = function(params){
        
            menu      = params.menu;
            menumod   = params.menumod;
            editor    = params.editor;
            filemod   = params.filemod;
            
      }//initmod
      
  //vars:-
  
  //:
  
      obj.init    = function(){
      }//init
      
  //:
  
      obj.initdom   = function(rootnode){
      
            var root                      = $.$(rootnode,'main-menu');
            var shadow                    = root.shadowRoot;

            var style                     = $(shadow,'style');
            $.stylesheet.copyrule('#page-inline','.icon',style);
            
            menu.add.style(shadow);
            
            
            var card                      = $(shadow,'.menu');
            $(shadow,'#icon').onclick     = menu.click(card,false,false,click);


      }//initdom

  //:

      function click(type,opt){

            if(type=='opt'){
                  click[opt.id]();
            }

      }//menu


      click.clear    = function(){
        
            filemod.clear();
            editor.clear();
            editor.filename.clear();
            
      }//clear
      

      click.new    = function(){

            var win   = window.open('https://javascript-2020.github.io/utils/editors/js-console/js-console.html');
            return win;

      }//new


      click.fork   = function(){

            var win   = menu.new();
            var txt   = editor.getValue();
            win.postMessage({txt},'*');

      }//fork


      click.source   = function(){
      
            window.open('https://github.com/javascript-2020/javascript-2020.github.io/tree/main/utils/js-console/');
            
      }//source


      
  return obj;
  
}//main
                  
      </script>

</main-menu>
        


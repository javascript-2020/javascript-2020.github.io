<html>

      <head>
      
            <title>encrypt</title>
            
            <base href='https://javascript-2020.github.io/utils/x509/encrypt/encrypt.html'>
            
            <style>
            
      input
            {font-size:16px;padding:5px 10px}
      input[type=button]
            {cursor:pointer}
            
            </style>
            
            <script>            
                                                                                console.clear();
                                                                                console.log('html-editor');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var mod   = {};

        var ext,$,datatype,menumod,keydown
        ;

        var filemod;
        var editor;
        var log;
        
        
        
        async function init(){
          
              filemod                   = filemod();
              editor                    = editor();
              log                       = log();


              filemod.initmod({menumod,complete,editor,init,ext});
              editor.initmod({});
              log.initmod({});


              filemod.init();
              editor.init();
              log.init();


          
              await initdom(document.body);


              init.complete();

              
        }//init

      
        init.stack            = [];
        init.stack.ct         = 0;
        init.stack.total      = 1;
        init.stack.mode       = '';
        init.stack.complete   = false;
        Object.defineProperty(init.stack,'add',{get:()=>{
              init.stack.total++;
              init.stack.mode && console[init.stack.mode]('add',init.stack.ct,init.stack.total);
        }});
        Object.defineProperty(init.stack,'complete',{get:()=>{
              init.stack.ct++;
              init.stack.mode && console[init.stack.mode]('complete',init.stack.ct,init.stack.total);
              init.stack.ct>=init.stack.total && init();
        }});
        init.complete         = function(){init.complete.stack.forEach(fn=>fn())}//complete
        init.complete.stack   = [];
        init.complete.add     = fn=>init.complete.stack.push(fn);
        //  (typeof init!='undefined' && init?.stack && init.stack.add)
        //  (typeof init!='undefined' && init?.stack && init.stack.complete)
      
            </script>

            <script libs>

        init.stack.add;
        
        fetch('https://raw.githubusercontent.com/javascript-2020/ext-code/main/ext-loader.js')
          .then(res=>res.text().then(async txt=>{

              ext           = eval(txt);
              var promise   = ext.load.libs(
                    'js/dom/$.js.api',
                    'js/core/datatype.js',
                    'js/dom/menumod/menumod.js',
                    'js/dom/keydown/keydown.js'
              );
              [$,datatype,menumod,keydown]   = await promise;

              init.stack.complete;

          }));

            </script>
            
      </head>
      
      <body>
      
            <div>
                  <h3>encrypt</h3>
            </div>
            
            <div id=hdr>
            
                  <filemod-api>
                        <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
                  </filemod-api>
                  
            </div>
            
            <div id=view>

                  <editor-api>
                        <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
                  </editor-api>
            
            </div>

<log-api>
      <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
</log-api>
            
            
            <script>
            
        async function initdom(rootnode){
          
              var root                  = rootnode;


              filemod.initdom(root);
              
              
              view                      = $('#view');
              

              await editor.initdom(view,'text');

              log.initdom();


              editor.focus();
              
          
        }//initdom
        
        
            </script>
            
      </body>
      
</html>
      
      



<!DOCTYPE html>

<html>

      <head>
            <meta charset=utf-8>
            
            <title>
                  Google Cloud Generate Token From Service Account KeyFile
            </title>
            
            <meta name=description content='Learn how to generate access tokens using a Google Cloud service account keyfile for secure API authentication and automated workflows.'>
            
            <base href='https://ext-code.com/utils/gcloud/generate-token-from-service-account-keyfile/'>
            <link rel=canonical href='https://ext-code.com/utils/gcloud/generate-token-from-service-account-keyfile/generate-token-from-service-account-keyfile.html'>
            
            <link rel=icon href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAABxVBMVEVHcExeiuEePYxxkts5VpUuSJpfi+FZht9EddoZQq8zX8RLetxfiNeRbltmkuWVlLPdrlpdcbw6ac46Vqhdh9waQKtggtk3YMbQzcBoidbToFHuzo1kjeEmT7nitmEWOaJTddNHbc5AbtJZfddHcdAeRrAtR5pukttnjuFzluF8iq9Kd9V/nN9qkeHAkFXgqk7ouFxolOkyR5Wwf0RDN1wuQYweNZC7nGpNT3scOJmqkGs6bdg8btg5a9bvmgc/cNlIed1Of+FFdt03aNNdjOdlk+pRguNCdNzi0LVLfN9hkOidgWjvnQpJet9aieUzZM87b9tXh+WQqNtBctrvpiHtlQRUheN4iLAuXcsuWMLmtFXskQKthEzvpB92d5DwqSjrvF7qnxnyrS7l1bqUrN6Bk7lGcNCjkn32tDfq3MSdtueYseEeO6IlRq4/bdV7gp6EcHFBbMyPjpVFaL/GqnfJto08YLytlXOmu+XLnVIyP4g1OHPWpVFVSmrQqWAnU8LisFS9ciVKbMXRgxtacbZcgNHdrFBcfMdbesTRycLSvIqlpaVtj9iln5lwmulSWZDNu5DRpFdjY4vBnGale0y6oHaljnKjk2rgAAAAO3RSTlMAZAMMAh+vr8vhq8cPCGUgwR+qIIrg4+ECi48TSOHF4ODhk+DBcB7HlimJcgZVD/3V8iK/RR/i+Cfe9Mct7OMAAAHbSURBVCjPhdNnW9NAAMDx0qLM2mVZshVQWeLWJr00AWqAEiEE2rSkARE72XtvEVEUhM/LXe4KIc8j/F/kRX7PJTcSk+nOmsofwLIMlVsIN7d1dLX3Dnb6fDzPBwIMqZHwQ6h9nT6eYVm/CACgUEB0ZhP+nVhKJJLJ5Bisn3RMOc2El+Lx+BfYJ10/9vMJl87HYrHR0Wg0OoAa1opOZvj5AbSBEVgPyQuLEH7W8BU2hJqMSF6MiPHUnpKJB+DE93Ylr/cGm+/r1rWzHQ5LkhSG10i+ycB+cXyqO5PypPCaBxGLaFMA+KwFQK1ZNzrAwC2jcB6t3EI9syJFT09zHO3xGBieB8+I1OGvubmZWYGm6RsMj8vHs+D7kbq8LC8uCBx2wl2YJ36qUysr3bIS5LTxFOYc/Gr/+J+/q6n0ifwtpA2njDy/tppKnapXXIC5Hc+MnlH/ra+fqQphUGDBjPaMFT2zi/LBFnx2EC2OAhlGnxlaNbegbGwooSAajL4mjbOdEzTHCYIQDG2mzy/Sm5ChsSyjsakuT8vtrqp6++7jB3dFRXFxTfXjoqLSEsTW+nukN+8r7a9fulwuh8Nhs9ksxh/CWrn2quX//4vVLr94dBu32m/jsjJbif7GJSYFrVsaLrNGAAAAAElFTkSuQmCC'>
            <meta name=viewport content='width=device-width, initial-scale=1'>
            
            <script type='application/ld+json'>
                  {
                        "@context"              : "https://schema.org",
                        "@type"                 : "SoftwareApplication",
                        "name"                  : "Google Cloud Generate Token From Service Account KeyFile",
                        "url"                   : "https://ext-code.com/utils/gcloud/generate-token-from-service-account-keyfile/generate-token-from-service-account-keyfile.html",
                        "author"                : {"@type":"Person","name":"Matthew Richards"},
                        "description"           : "Learn how to generate access tokens using a Google Cloud service account keyfile for secure API authentication and automated workflows.",
                        "applicationCategory"   : "DeveloperApplication",
                        "operatingSystem"       : "All",
                        "browserRequirements"   : "Requires JavaScript-enabled browser",
                        "softwareVersion"       : "1.0.0",
                        "offers"                : {"@type":"Offer","price":"0","priceCurrency":"GBP"}
                  }
            </script>
            
            
            <script src='https://ajaxorg.github.io/ace-builds/src-noconflict/ace.js'></script>
            
            <!--
            <script src='generate.js'></script>
            -->
            
            
            <script src='https://libs.ext-code.com/js/dom/component/v3.0/component.js'></script>
            
            <script init>
                                                                                console.clear();
                                                                                console.log('backup-github-repo.html');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var df=true,version='v2.0'
        ;
        
        var ace;
        
        var ext;
        var $;
        var datatype;
        var menumod;
        var keydown;
        var debug;
        
        var menu;
        
        var hdr;
        var script;
        var log;
        
        
        async function init(){
        
              menu      = menumod();
              
              hdr       = mod['gcloud-hdr'];
              script    = mod['script'];
              log       = mod['log-mod'];
              
              hdr.initmod({ext,$,menu});
              script.initmod({ext,$,menu,ace});
              log.initmod({ext,$});
              
              await Promise.all([
                    hdr.init(),
                    script.init(),
                    log.init(),
              ]);
              
              
              initdom();
              
        }//init
        
        
(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
        
        var promise   = ext.load.libs(
              'js/dom/$.js',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js',
              'js/debug/debug.js',
        );
        [$,datatype,menumod,keydown,debug]   = await promise;
        
        
        //JSZip   = (await import('https://cdn.jsdelivr.net/npm/jszip/+esm')).default;
        
        mod.stack.complete;
        
})();

            </script>
            
            
            <style>
            
  html
    {height:100%;font-family:arial}
    
  body
    {height:calc(100% - 40px);display:flex;flex-direction:column;gap:20px;margin:20px}
    
  [component]
    {display:none}
    
  input
    {font-size:16px;padding:5px 10px}
  input[type=button]
    {cursor:pointer}
  input[type=checkbox]
    {width:15px;height:15px;margin:0}
    
    
  .description
    {text-align:justify;border-left:4px solid #4a90e2;padding:1rem;
      background-color:#f9f9f9;font-family:system-ui,sans-serif;font-size:1rem;line-height:1.6;color:#333}
  .description>p
    {margin:0}
  .description > p+p
    {margin:10px 0}
    
    
    
  a
    {color:#4a90e2;text-decoration:none;font-weight:500}
  a:hover
    {text-decoration:underline}
  .link-domain
    {font-size:0.85rem;color:#777;margin-left:0.25rem}
  .link-domain::before
    {content:'['}
  .link-domain::after
    {content:']'}
  .link-txt
    {}
    
    
    
    
  .value
    {white-space:pre-wrap;font-family:monospace;word-break:break-all;border:1px solid lightgray;border-radius:10px;padding:10px;flex: 0 0 auto;}
    
    
    
  #keyfile
    {height:350px}
    
    
    
  #scopes
    {border:1px solid lightgray;padding:10px;border-radius:10px}
  #scopes-hdr
    {margin-bottom:10px}
  #scopes-list
    {display:flex;flex-direction:column;gap:10px;}
  .scopes-item
    {display:flex;gap:20px;align-items:center;padding:5px 10px;cursor:pointer;padding-left:30px}
  .scopes-item:hover
    {background:lightyellow}
  .scopes-item #scope
    {flex:1}
  .scopes-item #desc
    {width:400px}
    
    
  #btns
    {display:flex;align-items:center}
  #hldr
    {display:inline-block;width:50px;text-align:center}
  #spinner
    {width:15px;height:15px}
    
  #output
    {height:350px}
    
    
    
  web-editor
    {border:1px solid lightgray;padding:10px}
    
  .visually-hidden
    {position:absolute;clip:rect(0 0 0 0);width:1px;height:1px;overflow:hidden;}
    
    
    
    
            </style>
            
      </head>
      
      
      <body>
      
      
            <gcloud-hdr component=grp>
                  <h1 class=visually-hidden>generate access token from service account keyfile</h1>
                  <img class=title src='images/generate-access-token-from-service-account-keyfile.png' style='top:-45px;height:160px' alt='generate access token from service account keyfile'>
                  <time slot=date datetime=2025-12-15>15 Dec 2025</time>
            </gcloud-hdr>
            
            
            <div class=description>
                  <p>
                        Learn how to generate access tokens using a Google Cloud service account keyfile for secure API authentication and automated workflows.
                  </p>
                  <p>
                        see also
                        <br>
                        <a href='/blog/25-07-29/gcloud-create-service-account/gcloud-create-service-account.html'>
                              blog / 25-07-29 / gcloud-create-service-account
                              <span class=link-domain>
                                    ext-code.com
                              </span>
                        </a>
                  </p>
            </div>
            
            
            <div>
                  select service account keyfile
                  <div>
                        <input id=file type=file>
                  </div>
            </div>
            
            
            <div id=keyfile class=value></div>
            
            
            <div id=scopes>
                  <div id=scopes-hdr>
                        scopes
                  </div>
                  <div id=scopes-list>
                        <div class=scopes-item style='display:none'>
                              <input type=checkbox checked>
                              <span id=scope>
                                    https://www.googleapis.com/auth/devstorage.read_write
                              </span>
                              <span id=desc>
                              </span>
                        </div>
                  </div>
            </div>
            
            
            <div id=btns>
                  <input value='generate token' type=button>
                  <span id=hldr>
                        <img id=spinner src='images/spinner.gif' style='display:none'>
                  </span>
                  <input value=copy type=button>
            </div>
            
            
            <div id=output class=value></div>
            
            
            <web-editor id=script component fullsize src='generate.js'></web-editor>
            
            
            <log-mod component></log-mod>
            
      </body>
      
      
      <script>
      
      
        var keyfile;
        var token;
        var spinner;
        
        var def_scopes    = [
                                  {scope:'https://www.googleapis.com/auth/devstorage.read_write',chk:true,desc:'Read/write access to Cloud Storage'},
                                  {scope:'https://www.googleapis.com/auth/devstorage.full_control',desc:'Full control Google Cloud Storage'},
                                  {scope:'https://www.googleapis.com/auth/cloud-platform',desc:'Full access to all Google Cloud services'},
                                  {scope:'https://www.googleapis.com/auth/drive',desc:'Full access to Google Drive'},
                            ];
                            
        var ui            = {};
        
        
        var btn           = {};
        var rd            = {};
        
        
  //:
  
  
        function initdom(){
        
        
              hdr.initdom();
              script.initdom();
              log.initdom();
              
              
              ui.list                                   = $('#scopes-list');
              ui.scope                                  = $('.scopes-item');
              ui.scope.remove();
              ui.scope.style.display    = '';
              
              def_scopes.forEach(item=>{
              
                    var nscope        = ui.scope.cloneNode(true);
                    nscope.onclick    = onclick;
                    $(nscope,'[type]').checked        = !!item.chk;
                    $(nscope,'#scope').textContent    = item.scope;
                    $(nscope,'#desc').textContent     = item.desc;
                    ui.list.append(nscope);
                    
                    function onclick(e){
                    
                          var chk   = $(nscope,'[type=checkbox]');
                          if(e.target===chk){
                                return;
                          }
                          chk.checked   = !chk.checked;
                          
                    }//onclick
                    
              });
              rd.scopes();
              
              
              $('[value="generate token"]').onclick     = btn.generate;
              spinner                                   = $('#hldr img');
              $('[value=copy]').onclick                 = btn.copy;
              
              
              file.onchange                     = onchange;
              
              
              
        }//initdom
        
        
  //:
  
  
        btn.generate    = async function(){
        
              if(!keyfile){
                    log.red('no service account file');
                    return;
              }
              create();
              
        }//generate
        
        
        btn.copy    = function(){
        
              if(!token){
                    log.red('no token');
                    return;
              }
              navigator.clipboard.writeText(token);
              log.green('token copied');
              
        }//copy
        
        
        async function onchange(){
        
              var blob      = file.files[0];
              var txt       = await blob.text();
              keyfile       = JSON.parse(txt);
              
              $('#keyfile').textContent   = JSON.stringify(keyfile,null,4);
              
        }//onchange
        
        
        rd.scopes   = function(){
        
              var list    = $.all(ui.list,'.scopes-item [type=checkbox]');
              list        = list.filter(chk=>chk.checked);
              list        = list.map(chk=>$(chk.parentNode,'#scope').textContent);
                                                                                console.log(list);
              return list;
              
        }//scopes
        
        
  //:
  
  
        async function create(){
        
              output.replaceChildren();
              $.show(spinner);
              
              var scope   = rd.scopes();
              
              fn();
              var {json,error}    = await generate(keyfile,scope);
              
              if(error){
                    disp.error(error);
                    return;
              }
              
              token   = json.access_token;
              
              
              navigator.clipboard.writeText(token);
              disp('token, copied to clipboard');
              disp(token);
              
              disp();
              
              disp.json(json);
              
              $.hide(spinner);
              
        }//create
        
        
        function fn(){
        
              var txt   = script.getvalue();
              window.eval(txt);
              
        }//gen
        
        
        function disp(){
        
              console.log.apply(console,arguments);
              
              var str             = [...arguments].join(' ');
              
              var div             = document.createElement('div');
              div.textContent     = str||' ';
              div.style.cssText   = 'margin-bottom:10px';
              output.append(div);
              
              output.scrollTop    = output.scrollHeight;
              return div;
              
        }//disp
        
        
        disp.error    = function(){
        
              var div           = disp.apply(null,arguments);
              div.style.color   = 'red';
              
        }//error
        
        
        disp.json   = function(v){
        
              var str   = JSON.stringify(v,null,4);
              disp(str);
              
        }//json
        
        
        
        
      </script>
      
      
</html>





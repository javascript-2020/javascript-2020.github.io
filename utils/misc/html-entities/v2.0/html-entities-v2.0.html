


<html>


      <head>
      
            <title>html-entities</title>

            <base href='https://ext-code.com/utils/editors/html-editor/'>
            <base href='https://javascript-2020.github.io/utils/editors/html-editor/'>
            
            <link rel=icon type='image/png' href='images/html-entities-30.png'>


            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>

            <script init>
                                                                                console.clear();
                                                                                console.log('html-entities-v2.0.html');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var df            = true;


        var he;
        
        
        var ext;
        var $;
        var datatype;
        var menumod;
        var keydown;
        
        var filemod;                                                                                
        var editor        = {};
        editor.source     = null;
        editor.output     = null;
        var log;


        var menu;

        var btn           = {};


  //:
  
  
        mod.stack.add   = init;
        
        async function init(){
                                                                                debug('init',version);

              //keydown                   = keydown();
              menu                      = mod.menumod();
              
              filemod                   = mod.filemod;
              editor.source             = mod['editor[source]'];
              editor.output             = mod['editor[output]'];
              log                       = mod.log;
              
              filemod.initmod({ext,$,menumod,menu,complete,source,focus,log});
              editor.source.initmod({ext,$,menumod,menu});
              editor.output.initmod({ext,$,menumod,menu});
              log.initmod({ext,$});
              
              await filemod.init();
              await editor.source.init();
              await editor.output.init();
              await log.init();

  //:
          
              window.onfocus            = focus;
              //keydown.add(kd);
              menu.on.close             = focus;

              
              await initdom(document.body);


        }//init


(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js'
        );
        [$,datatype,menumod,keydown]   = await promise;
  
        mod.stack.complete;
              
})();


(async()=>{
  
        he    = await import('https://cdn.jsdelivr.net/npm/he/+esm');
        he    = he.default;
        
})();


            </script init>
      
      </head>
      
      
      <body>
      
            <style id=page-inline>

  html
    {height:100%}
    
  body
    {height:calc(100% - 16px);display:flex;flex-direction:column;gap:10px}
    
  .icon
    {width:32px;height:32px;border:1px solid gray;border-radius:3px;box-sizing:border-box;cursor:pointer}
    
  #hdr
    {display:flex;align-items:center}
    
  #view
    {flex:1;display:flex;gap:10px}


  input
    {font-size:16px;padding:5px 10px}
    
  input[type=button]
    {cursor:pointer}
    
            </style>
            
            <div id=hdr>
            
                  <filemod component v2.0></filemod>
                  <input value=convert type=button>
                  
            </div>
            
            <div id=view>
            
                  <div id=source>
                        <editor inst=source component v2.0></editor>
                  </div>

                  <div id=output>
                        <editor inst=output component v2.0></editor>
                  </div>
                  
            </div>


            <log component v2.0></log>

            
      </body>
      
      
      <script>


      
        var root;
        
        
        

  //:
  
  
        async function initdom(rootnode){
          
              root                                  = rootnode;
              
              var hdr                               = $(root,'#hdr');
              
              filemod.initdom(hdr);
              
              $(hdr,'[value=convert]').onclick      = btn.convert;
              
              

              var view                              = $(root,'#view');

              var root2                             = $(view,'#source');
              await editor.source.initdom(root2,'txt');
              var root2                             = $(view,'#output');
              await editor.output.initdom(root2,'txt');

              log.initdom();


              focus();
              
              
        }//initdom
        

        function focus(){
          
              editor.source.focus();
              
        }//focus


  //:
  
  
        btn.convert   = function(){
          
              var txt       = editor.source.getValue();
              var encoded   = convert(txt);
              editor.output.setValue(encoded,-1);
              
        }//convert

  //:


        function source(){
        }//source
        
        
        function complete(){
        }//complete
        
        
        complete.load   = function(file,blob){
        }//load
        
        
        complete.save   = function(file){}


  //:
  

        function convert(txt){
          
              var opts;
              
              var encoded   = he.encode(txt,opts);
              
              return encoded;
              
        }//convert
        
        
  //:


        function debug(){
          
              if(!df)return;
              var str   = [...arguments].join(' ');
              console.log('[ https-file ]',str);
              
        }//debug
        
        
  
      </script>
      
      
</html>





<!DOCTYPE html>


<html>

      <head>
            <meta charset=utf-8>
      
            <title>
                  Make Cloud Run Service Public
            </title>

            <meta name=description content='Learn how to make a Google Cloud Run service publicly accessible using Node.js and the HTTP REST API. This guide covers setting IAM permissions, configuring service visibility, and deploying with gcloud and direct API calls.'>
            <link rel=icon type='image/png' href='/blog/image/blog-30.png'>
            <meta name=viewport content='width=device-width, initial-scale=1'>

            <base href='https://javascript-2020.github.io/blog/25-07-29/make-cloud-run-service-public/'>
            <link rel=canonical href='https://ext-code.com/blog/25-07-29/make-cloud-run-service-public/make-cloud-run-service-public.html'>


            <script type='application/ld+json'>
            
                  {
                        "@context"            : "https://schema.org",
                        "@type"               : "TechArticle",
                        "headline"            : "Make Cloud Run Service Public",
                        "description"         : "Learn how to make a Google Cloud Run service publicly accessible using Node.js and the HTTP REST API. This guide covers setting IAM permissions, configuring service visibility, and deploying with gcloud and direct API calls.",
                        "author"              : {"@type":"Person","name":"Matthew Richards"},
                        "datePublished"       : "2025-07-29",
                        "dateModified"        : "2025-10-22",
                        "mainEntityOfPage"    : {"@type":"WebPage","@id":"https://ext-code.com/blog/25-07-29/make-cloud-run-service-public/make-cloud-run-service-public.html"},
                        "publisher"           : {"@type":"Organization","name":"ext-code.com","logo":{"@type":"ImageObject","url":"https://ext-code.com/favicon.ico"}},
                  }
            
            </script>


            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>
            <script src='https://libs.ext-code.com/js/dom/init-hdr/init-hdr.js'></script>


            <link rel=stylesheet href='/blog/css/blog.css'>

            <style>
            
  html
    {height:100%;font-family:arial}
  body
    {min-height:calc(100% - 40px);display:flex;flex-direction:column;gap:20px;margin:20px;align-items:center;
      padding-bottom:200px;
    }
  body>*
    {max-width:1400px;width:100%;padding:0 20px;}
    
  [component]
    {display:none}
    
  .description 
    {max-width:1000px;text-align:justify;border-left:4px solid #4a90e2;padding:1rem;
      background-color:#f9f9f9;font-family:system-ui,sans-serif;font-size:1rem;line-height:1.6;color:#333}
  .description>p
    {margin:0}
  .description > p+p
    {margin:10px 0}

  code
    {font-family:monospace;background:whitesmoke}
  code.inline
    {display:inline;padding:5px 10px}

  a
    {color:#4a90e2;text-decoration:none;font-weight:500}
  a:hover 
    {text-decoration:underline}
  .link-domain
    {font-size:0.85rem;color:#777;margin-left:0.25rem}
  .link-domain::before 
    {content:'['}
  .link-domain::after
    {content:']'}
  .link-txt
    {}

  input
    {font-size:16px;padding:5px 7px;box-sizing:border-box;}
  input[type=button]
    {cursor:pointer}



  code
    {background:whitesmoke;border:1px solid gray;padding:10px;font-size:16px}


            </style>
            
      </head>
      
      
      <body>

            <blog-hdr component=grp1 v2.0>      
                  <h1 class=title>
                        Make Cloud Run Service Public
                  </h1>
                  <time slot=date datetime=2025-10-22>
                        22 Oct 2025
                  </time>
            </blog-hdr>


            <div class=description>
                  <p>
                        Learn how to make a Google Cloud Run service publicly accessible using Node.js and the HTTP REST API.
                        This guide covers setting IAM permissions, configuring service visibility, and deploying with gcloud and direct API calls.
                  </p>
            </div>
      


            <div>
                  generate service account token
            </div>
            
            <code>

        
        import { GoogleAuth } from 'google-auth-library';
        
        const auth = new GoogleAuth({
          keyFile: 'me.json',
          scopes: ['https://www.googleapis.com/auth/cloud-platform']
        });
        
        const client = await auth.getClient();
        const token = await client.getAccessToken();
        
        console.log('Access Token:', token);
        
        
            </code>
            
            <div>
                  using the service account token, make a service publically accessible
            </div>

            <code>
            
(async()=>{

//
//  requires service account token
//
//


        var token     = '';
        
        var project   = '';
        var service   = '';
        

        
  //list service details
  
  
        var url       = `https://run.googleapis.com/v1/projects/${project}/locations/us-central1/services/${service}:getIamPolicy';
        var headers   = {
              authorization     : `Bearer ${token}`,
              'content-type'    : 'application/json'
        };
        
        var res     = await fetch(url,{headers});
        var json    = await res.json();
        
        console.json(json);
        


  //make public
  
        var json    = {
              policy    : {
                    bindings    : [
                          {
                            role      : 'roles/run.invoker',
                            members   : ['allUsers']
                          }
                    ]
              }
        };
            
        var url       = `https://run.googleapis.com/v1/projects/${project}/locations/us-central1/services/${service}:setIamPolicy';
        var headers   = {
              authorization     : `Bearer ${token}`,
              'content-type'    : 'application/json'
        };
        var body    = JSON.stringify(json);
        
        var res     = await fetch(url,{headers,method:'post',body});
        var json    = await res.json();
        
        console.json(json);
        
        


})();
            
            </code>
            
            
      </body>
      
      
</html>





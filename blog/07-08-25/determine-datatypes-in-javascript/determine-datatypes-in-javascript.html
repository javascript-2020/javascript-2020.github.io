


<html>


      <head>

      
            <title></title>

            <base href='https://javascript-2020.github.io/blog/07-08-25/determine-datatypes-in-javascript/determine-datatypes-in-javascript.html'>
            
            <link rel=icon type='image/png' href='/blog/image/blog-30.png'>
            
            <link rel=stylesheet href='/blog/css/blog.css'>

            <script src='https://ajaxorg.github.io/ace-builds/src-noconflict/ace.js'></script>





            <script init>
                                                                                console.clear();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var version       = 'v1.0';
            
        var df            = true;


        var ext;
        var $;
        var datatype;
        var menumod;
        var code;
        
        var mod           = {};
        
        //var codeblock;
        

  //:

              
        async function init(){
                                                                                //debug('init',version);
              //codeblock   = mod['code-block']();
              
              //codeblock.initmod({ext,$,code});

              
              //await codeblock.init();
              
              menu    = menumod();
              
              await initdom(document.body);


              init.complete();

        }//init


        init.stack            = [init];
        init.stack.ct         = 0;
        init.stack.total      = 1;
        init.stack.mode       = '';
        init.stack.complete   = false;
        Object.defineProperty(init.stack,'add',{get:()=>{
              init.stack.total++;
              if(init.stack.mode){
                    console[init.stack.mode]('add',init.stack.ct,init.stack.total);
                                                                                //console.trace();
              }
        }});
        Object.defineProperty(init.stack,'complete',{get:()=>{
              init.stack.ct++;
              if(init.stack.mode){
                    console[init.stack.mode]('complete',init.stack.ct,init.stack.total);
                                                                                //console.trace();
              }
              if(init.stack.ct>=init.stack.total){
                                                                                //console.log('*** complete');
                    init.stack.ct       = 0;
                    init.stack.total    = 0;
                    var list    = [...init.stack];
                    init.stack.length   = 0;
                    list.forEach(fn=>fn());
              }
        }});
        
        //  (typeof init!='undefined' && init?.stack && init.stack.add)
        //  (typeof init!='undefined' && init?.stack && init.stack.complete)

        
        init.complete   = function(){
          
              init.complete.stack.forEach(fn=>fn());
              
              
        }//complete
        
        init.complete.stack   = [];
        init.complete.add     = fn=>init.complete.stack.push(fn);

                  

(async()=>{
  
        init.stack.add;
        
        var token   = localStorage['github-token'];
        var url;
        var headers;
        if(token){
              url       = 'https://api.github.com/repos/javascript-2020/ext-code/contents/ext-loader.js';
              headers   = {accept:'application/vnd.github.raw',authorization:`bearer ${token}`};
        }else{
              url       = 'https://raw.githubusercontent.com/javascript-2020/ext-code/main/ext-loader.js';
        }
        
        await fetch(url,{headers}).then(res=>res.text()).then(complete);

            
        async function complete(txt){

              ext           = eval(txt);
              var promise   = ext.load.libs(
                    'js/dom/$.js.api',
                    'js/core/datatype.js',
                    'js/dom/menumod/menumod.js',
                    'js/dom/code/code.js.api',
              );
              [$,datatype,menumod,code]   = await promise;

              code.initmod({ext,$,datatype,menumod});
              
              init.stack.complete;

        }//ext_fn

})();


            </script init>


            <style>
            
  html
    {height:100%}
  body
    {min-height:calc(100% - 40px);display:flex;flex-direction:column;gap:10px;
      font-family:arial
    }
    
  h3
    {text-align:center;color:blue}
    
  code
    {margin:0;border:1px solid lightgray}
    
  input
    {font-size:16px;padding:5px 10px}
  input[type=button]
    {cursor:pointer}
    
    
  .break
    {margin-top:30px}
  iframe
    {display:none}
    
    
            </style>

      </head>
      
      
      <body>
      
            <h3>
                  determine datatypes in javascript
            </h3>


            <div id=desc>

Determining datatypes in javascript always seemed to be a bit of a mystery, I've seen hundreds
of incarnations over the years, some work in some circumstances, until the code starts to get more 
complex and then just mysteriously stop working, my go to for datatype has always been the following :
            
            </div>


            <code-block snippet-console=ex1 api></code-block>


            <div class=break></div>            

            <div>

This can be extended further through the use of

            </div>
            
            
            <code snippet-console=ex2></code>
            

            <div class=break></div>            

            <div>

There have been many a bug created by using 

            </div>
            
            
            <code snippet-console=ex3></code>

      </body>      
      
      
<!-- ----- -->

      <script>


        var menu;
  
        var snippets    = [];


  //:
  
  
        async function initdom(rootnode){
          
          
              root                                  = rootnode;



              var node    = $(root,'code-block');
              code.code_block(node,{menu});



              
              await code.snippet_console.all(root,{menu});



              
        }//initdom
            
  
  //:
  
  
  
  init.stack.complete;
  
            
      </script>
      
      
</html>





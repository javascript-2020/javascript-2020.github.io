

<!-- headers
      cross-origin-isolate
-->


<!DOCTYPE html>


<html>

      <head>
            <meta charset=utf-8>
      
            <title>
                  Very Simple Proxy
            </title>

            <meta name=description content='Learn how to build a simple Node.js proxy server that forwards HTTP requests. Explore editable, runnable code via web containers to inspect headers and relay responses seamlessly.'>
            <link rel=icon type='image/png' href='/blog/image/blog-30.png'>
            <meta name=viewport content='width=device-width, initial-scale=1'>

            <base href='https://ext-code.com/blog/25-07-26/very-simple-http-proxy/'>
            <link rel=canonical href='https://ext-code.com/blog/25-07-26/very-simple-http-proxy/very-simple-http-proxy.html'>
            

            <script type='application/ld+json'>
            
                  {
                        "@context"            : "https://schema.org",
                        "@type"               : "TechArticle",
                        "headline"            : "Http Streaming Download",
                        "description"         : "Learn how to build a simple Node.js proxy server that forwards HTTP requests. Explore editable, runnable code via web containers to inspect headers and relay responses seamlessly.",
                        "author"              : {"@type":"Person","name":"Matthew Richards"},
                        "datePublished"       : "2025-07-25",
                        "dateModified"        : "2025-10-18",
                        "mainEntityOfPage"    : {"@type":"WebPage","@id":"https://ext-code.com/blog/25-07-25/http-streaming-download/http-streaming-download.html"},
                        "publisher"           : {"@type":"Organization","name":"ext-code.com","logo":{"@type":"ImageObject","url":"https://ext-code.com/favicon.ico"}},
                  }
            
            </script>



            <script src='https://ajaxorg.github.io/ace-builds/src-noconflict/ace.js'></script>


            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>
            

            <script init>            
                                                                                console.clear();
                                                                                console.log('very-simple-http-proxy.html');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var df=true,version='v2.0'
        ;


        var ext;
        var $;
        var datatype;
        var menumod;
        var keydown;
        var debug;


        var ace;
        
        var menu;
            
        var example;
        
        var log;
        
        
    //:

              
        async function init(){
                                                                                //debug('init',version);
              
              menu    = menumod();



              example   = mod.example;
              
              example.initmod({ext,$,menu,ace,on});
              example.btn.run   = btn.run;
              
              await example.init();



              initdom(document.body);

              
        }//init


  //:
  
  
(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js.api',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js',
              'js/debug/debug.js',
        );
        [$,datatype,menumod,keydown,debug]   = await promise;
  
        
        [srcdoc]    = await ext.text.github('javascript-2020:javascript-2020.github.io:main:blog/25-07-25/http-streaming-download/ex/srcdoc.html');
        
        mod.stack.complete;
              
})();

                  
            </script init>


<!--
  //:
-->

            
            <link rel=stylesheet href='/blog/css/blog.css'>

            <style>
            
  html
    {height:100%;font-family:arial}
  body
    {min-height:calc(100% - 40px);display:flex;flex-direction:column;gap:20px;margin:20px;align-items:center;
      padding-bottom:200px;
    }
  body>*
    {max-width:1400px;width:100%;padding:0 20px;}
    
  [component]
    {display:none}
    
  .description 
    {max-width:1000px;text-align:justify;border-left:4px solid #4a90e2;padding:1rem;
      background-color:#f9f9f9;font-family:system-ui,sans-serif;font-size:1rem;line-height:1.6;color:#333}
  .description>p
    {margin:0}
  .description > p+p
    {margin:10px 0}

  code
    {font-family:monospace;background:whitesmoke}
  code.inline
    {display:inline;padding:5px 10px}

  a
    {color:#4a90e2;text-decoration:none;font-weight:500}
  a:hover 
    {text-decoration:underline}
  .link-domain
    {font-size:0.85rem;color:#777;margin-left:0.25rem}
  .link-domain::before 
    {content:'['}
  .link-domain::after
    {content:']'}
  .link-txt
    {}

  input
    {font-size:16px;padding:5px 7px;box-sizing:border-box;}
  input[type=button]
    {cursor:pointer}




    
  iframe
    {width:100%}



            </style>
            
      </head>
      
      
      <body>


            <blog-hdr component=grp1 v2.0>      
                  <h1 class=title>
                        Very Simple Proxy
                  </h1>
                  <time slot=date datetime=2025-10-18>
                        22 Oct 2025
                  </time>
            </blog-hdr>

      
            <div class=description>
            
                  <p>
                        Learn how to build a simple Node.js proxy server that forwards HTTP requests.
                        Explore editable, runnable code via web containers to inspect headers and relay responses seamlessly.
                  </p>

                  <p>
                        notes:
                  </p>
                  
                  <p>
                        this demo version uses webcontainers to run the code, the webcontainer runtime is limited in that at the time of writing
                        it is not handling https correctly.  Therefore the demonstration code uses http.  The same logic applies for https,
                        the call would typically require some modification either with <code class=inline>{ca:cert}</code> to supply the
                        signing certificate the server responds with, or with <code class=inline>{rejectUnauthorized:false}</code> to allow
                        self-signed certificates
                  </p>
                  
                  <p>
                        <a href='https://ext-code.com/utils/x509/generate-https-certificate/generate-https-certificate.html'>
                              generate https certificate
                              <span class=link-domain>
                                    ext-code.com
                              </span>
                        </a>
                  </p>
                        
                  <p>
                        <a href='https://nodejs.org/api/http.html#httprequesturl-options-callback' class=link-stable>
                              http.request
                              <span class=link-domain>
                                    nodedjs.org
                              </span>
                        </a>
                  </p>
                  
                  <p>
                        <a href='https://nodejs.org/api/https.html#httpsrequestoptions-callback' class=link-stable>
                              https.request
                              <span class=link-domain>
                                    nodedjs.org
                              </span>
                        </a>
                  </p>
                        
                  <p>
                  </p>
                  
                  <p>
                        i typically use this code for when say an esp32 is not communicating properly with the internet, i can proxy the esp32
                        request through a server like this.  maybe the esp32 network stack is not working 100% or something.  i think
                        theoretically the host file could be modified for a domain such as example.com to point to the proxy server, then
                        in the proxy server rewrite the host header and forward the request via the ip address of the server you want to contact
                        this is untested at the moment, maybe i'll patch the fetch command to simulate the host file and include the deomstration
                        code at some point
                  </p>
                  
                  <p>
                        a working version of the nodejs https proxy server will be available 
                        <a href='/code/nodejs/servers/very-simple-proxy.nodejs.js'>
                              /code/nodejs/servers/very-simple-proxy.nodejs.js
                              <span class=link-domain>
                                    ext-code.com
                              </span>
                        </a>
                  </p>
                  
            </div>
            
            
            

            <snippet-terminal-console id=example type=nodejs component v2.0 src='ex/very-simple-http-proxy.js'></snippet-terminal-console>


            <iframe id=iframe></iframe>


      </body>


      <script>

      
        var webcontainer;
        var process;

        var urls        = {};
        
        
        var btn         = {};
        var on          = {};
        

  //:
  
  
        function initdom(rootnode){
          
              example.initdom();
              
        }//initdom
            

  //:


        btn.run   = async function(){
          
              if(process){
                    await process.kill();
              }
              
              urls    = {};
              
        }//run
        

        on.init   = function({webcontainer:wc}){
          
              webcontainer    = wc;
              
        }//init
        
        
        on.run    = function({process:p}){
                                                                                console.log('on.run');
              process   = p;
              
        }//run
        
        
        on['server-ready']   = function({port,url}){
                                                                                console.log('on.server-ready',port,url);
              if(port==8005){
                    iframe.src    = url;
              }
              
        }//server-ready
  
  
  
      </script>
      
</html>





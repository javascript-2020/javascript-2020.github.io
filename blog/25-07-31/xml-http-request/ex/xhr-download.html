      <style>
  body        {display:flex;flex-direction:column;gap:10px}
  #progress   {border:1px solid lightgray;padding:1px;height:20px}
  #bar        {background:lightblue;height:100%;width:0}
  input       {font-size:16px;padding:5px 10px}
      </style>

      <input id=url value='https://localhost:3010/download'>
      <input id=download value=download type=button>
      
      <div id=progress>
        <div id=bar></div>
      </div>

      
      <div id=result>ready</div>
      
      
      <script>
                                                                                console.clear();
        
        download.onclick   = e=>{
        
              result.textContent    = 'starting download';
              bar.style.width       = 0;
              
              var xhr   = new XMLHttpRequest();
              
              xhr.open('get',url);
              
              xhr.onprogress   = e=>{
                                                                                console.log('download.onprogress');
                                                                                console.log(e);
                    if(e.lengthComputable){
                          var p             = e.loaded/e.total*100;
                          bar.style.width   = p+'%';
                    }
                    
              }//onprogress
              
              xhr.onload    = ()=>{

                    var ok    = (xhr.status>=200 && xhr.status<300);
                    if(ok){
                                                                                console.log('download complete',xhr.status,xhr.statusText);
                          bar.style.width       = '100%';
                          result.textContent    = 'done';
                          return;
                    }
                                                                                console.warn('download error:',xhr.status,xhr.statusText);
                                                                                console.log(xhr.responseText);
              }//onload
                    
              xhr.send();
              
        }//onclick


      </script>

<!doctype html>
<html>
    <head style="display: block;">
    
        <meta style="display: block;" name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" style="display: block;">
        </link>
        <link style="display: block;" href="/css/website.css" id="website-css" rel="stylesheet">
        </link>
        
        <style style="display: none;" id="page-css">
        </style>
        <script style="display: none;" id="page-js">
        </script>

<script type=module>

        import jszip from 'https://cdn.jsdelivr.net/npm/jszip/+esm';
                                                                                console.clear();

        fetch.import          = url=>fetch(url).then(res=>res.text().then(js=>Promise.resolve(eval(`(${js})`))));
        fetch.import.gitraw   = url=>fetch.import('https://raw.githubusercontent.com/'+url);
        fetch.import.me       = url=>{var i=url.indexOf('/'),repo=url.slice(0,i),path=url.slice(i+1);
                                      return fetch.import.gitraw(`javascript-2020/${repo}/main/${path}`)};

        var hs    = await fetch.import.me('libs/js/string/hs');

        
(async ()=>{

        var url       = window.location.toString();
        var i         = url.indexOf('?');
        if(i==-1)return;
        var search    = url.slice(i+1);
        var parts     = search.split(',');
        var path      = parts.pop();
        if(!path)return;
        
        var params    = {};
        parts.forEach(param=>{
        
              var [key,value]   = param.split('=');
              params[key]       = value;
              
        });
        
        var user      = params.user||'javascript-2020';
        var repo      = params.repo||'stackoverflow';
        var branch    = params.branch||'main';
        path          = params.path||path;
        var raw       = params.raw||true;
                                                                                dispn('user='+user,'repo='+repo,'branch='+branch,'path='+path,'raw='+raw);
                                                                                spc();
                                                                                disp(path);
                                                                                spc();
        if(path[0]=='/')path    = path.slice(1);
        if(path && path.slice(-1)!='/')path  += '/';
        
        var zip     = new jszip();
        
        var file    = `${path.split('/').filter(Boolean).at(-1)||repo}.zip`;
        
        var url     = `https://api.github.com/repos/${user}/${repo}/git/trees/${branch}?recursive=true`;
        var res     = await fetch(url);
        
        if(!res.ok){
              var br    = document.createElement('br');
              document.body.append('failed',br.cloneNode());
              var txt   = await res.text();
              document.body.append(txt);
              return;
        }
        
        var json    = await res.json();
        var c       = 0;
        await Promise.all(json.tree.map(async item=>{
        
              if(!item.path.startsWith(path))return;
              
              var fn      = item.path.slice(path.length);
              var node    = disp(++c,fn);
              
              if(item.type=='tree'){
                    zip.folder(fn);
              }else{
                    var url,opts;
                    if(raw){
                          url     = `https://raw.githubusercontent.com/${user}/${repo}/${branch}/${item.path}`;
                          opts    = {};
                    }else{
                          url     = `https://api.github.com/repos/${user}/${repo}/contents/${item.path}?ref=${branch}`;
                          opts    = {headers:{accept:'application/vnd.github.raw+json'}};
                    }
                    
                    var res   = await fetch(url,opts);
                    try{
                          var hdr   = res.headers.get('content-length')
                          node.append(' ','content-length',' ',hs(hdr));
                    }
                    catch(err){}
                    
                    var blob    = await res.blob();
                    zip.file(fn,blob);
              }
              
        }));
        
        var blob      = await zip.generateAsync({type:'blob'});
        var url       = window.URL.createObjectURL(blob);
        var a         = document.createElement('a');
        a.href        = url;
        a.download    = file;
        a.click();
        
  //:
  
        function disp(fn){
        
              var str             = [...arguments].join(' ');
              var node            = document.createElement('div');
              node.textContent    = str;
              output.append(node);
              return node;
              
        }//disp
        
        function dispn(fn){
        
              var node;
              [...arguments].forEach(str=>{
              
                    node                = document.createElement('div');
                    node.textContent    = str;
                    output.append(node);
                    
              });
              return node;
              
        }//dispn
        
        function spc(){
        
              var div             = document.createElement('div');
              div.style.cssText   = 'height:20px';
              output.append(div);
              
        }//spc


})();        

</script>

        </meta>
    </head>
    <body>
        <div id="hdr" style="">
            <a id="home" class="hdr-icon" href="https://javascript-2020.github.io/">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAABA5JREFUOE+lkVtsVEUYx//fnDnn7KW73XZ7peVSWtvSC5duGrXGkBLFUH1AfdD0DWNMn3zwwURJZA2++CKJvtCoSBMkaoLEBDEYpBQCldRSUnq11La4lF7YstfuntuM2cIjKLGTTDLJN//f9/1mCE+womdP+Ae+u1V/99Ls8IHZ49l/i9AT8JA+czx06du5nxam459t8fg/b78Yth+X+09gODyqdW3ua5mfSLQOXkrEa3Tt5PqA3yx3FmXvvMiFzRY8G/vDB0qPrkv542NLB+Pp1GEpBAV8viOH3ip9b13Aj75cOBhLxg8LIagoUHAk/HbZ/wNeGZNvKhyha8MxNRhQ3yUiWloxjz2zI3BXEmbanqKvHzXpYz/l6qT8ghG6LEcmGENh7qJty5imMo8ATrXVUucjgVJKdusW1EgEjs8HcrtBo6NwCqozrddGFrozhrMdkA+zBE1lU60NJV2puby+xkYomQxkMglZWQmlpgYWXR6XtZyjUzgYAUMeAUVk48K5y3cnLMJpAHsXlhfhOAIVZWUgQr8lsvv2P7+1WnLskcA9CKSYgibbxknqH5MtNomfpZRuAIyIDEHijd6+5d+hKaelkHvHpqYghIOG2joojPVnLHVfx25fiEn2vZRSByCIKMMle5l6zieCI5ORU5msuTvn5dKVyYYtJR2BAk9qas74wTDFbkA8VGY55cHKDZ79mWRCnZxd/iVrOXW5otul9TXVVb5O73TPewoc+0eAXsoVfB7FeHpn8Sd5bt5sOeLVmb9X1fISV04VkYUsqio9tsbpt9Ws82v/jXuHU6u250E3ee6+wl+j8ImonyznrBDiOSEEdE2Bx21mGZMKAFVKrMHWIgIgljvAEZLM1YzmNkwHjLHcviJVpYM+6IkEdaGdvxeN7lyJx1BfXY2Az4KSCxIgpIRh2CAiqJzl3nAN7gggnlQxPj2NwvwAioLBGwYzX6APu2fLdc17wTSNesu2EfDnobU5kFNHxrQw8ucSlu+n4XVpcOkcVRsLUFLoRTLtYOBmDLFECirn0DR9wjDTe+hQz8omJuxeIcRWKSU0jSPUmA+vm2E2ch9/jM5DVRn8XhdSqybKi33YUV8G0wIGR+MwzQfTM8b+Eoy3U/irpRri1Dtze64ylkhge/02tDYXQkoLt+djWFpJQ1EYvG4NGcOCW+fYUOKHz+vFwM0VDE+MI+D3o2rT5oi0ZTuFj841kO4+MzQyUhxLxvHsrhBam0ugKBZiySySaRMKI+g6X5uGc2UN6nZ5MTC8hP6hQQR8+djV1LQsjcwr9P6nEz5P0L9rcGKcx2NxtIVa0NJQilQ2jTuLMUSjaXDOkefVkU0b4C4FwXwXKipKcX14EVcHryM/kI9Q/TZ7NZoY+gdEZNOa/2ZSPwAAAABJRU5ErkJggg==" class="hdr-icon-img" />
                <div class="hdr-icon-label">
home
                </div>
            </a>
            <a id="github" class="hdr-icon" href="https://github.com/javascript-2020/javascript-2020.github.io/blob/main/download/github-folder.html">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbFJREFUOE/l1E2IT2EUx/HPIFI2lJfGwmYsxFZKEUWjKWM3pZSpKcqeBcpLZsNeUeNlZWdBSVFmkAXbmRWbWRCRjYW8jv+pc/V4utff3q3bvfc5z/k+557zO2dA97UHy7ERx3LbZbzEZzxscx3o4L3GWizusP/AO6yv7TXwAo5g9V8iL03vcRWnm8USeBHH/xFUb7uEE7HYAOMZeVmGm7iN61jVccBHjOMQxvAl870QoIDMZ87CfxR3E7QDTyroTjzOtf24k++R0w0BHMY9LEpDCeyXgRL4EyMBjEKcSs+o3r4uSbTQQ1r3CzVMBnCh2PimTQp9wgyJDZZV/g+Bz7E1c/AdezHdr7xp34UHvcIuye8XUZSy9A1nDT5UBSvPCL9oz9BeeY2GYR3msBIHsi834WlPTt9yrXQKIUdEIfoVhSG6Z3PTejdwGG+xDc9SPud7UZ6popjEyZaURMuOl8NhKvtzpKf4yGvMwk95l/5xwNkKeA0T5XCI96EcRbsLh5mWAtXARznyXtXA5tD4/YNYmuBzVTQN8Ctu5V/93tI1sbdjS463KxXwaFZ/NnP9h/kXPcNYElddRc0AAAAASUVORK5CYII=" class="hdr-icon-img" />
                <div class="hdr-icon-label">
github
                </div>
            </a>
            
            <img id="title" style="" class="hdr-title" src="download-github-folder.png" />
            
            <div style="" id="date" class="hdr-date">
30 Jul 2024
            </div>
        </div>
        <div id="background" style="position: fixed; z-index: -1;">
        </div>


        <div id="scroll">
            <div id="center" style="">

<!-- page html -->


<h3 class=heading>download github folder as zip</h3>


<code class=code>
      https://javascript-2020.github.io/download/github-folder?user=javascript-2020,repo=stackoverflow,branch=main,raw=true,&lt;path>
</code>

<section>
      <pre id=output>
      </pre>
</section>


<!-- page html -->

            </div>
        </div>


        <div id="ftr" style="margin-top: 20px; background-color: rgb(0, 103, 165); display: flex; padding-bottom: 10px;">
            <img src="/javascript-2020.png" style="height: 40px;" />
            <div id="spc" style="flex: 1 1 0%;">
            </div>
            <a href="https://www.textstudio.com/" style="margin-right: 30px; margin-top: 10px; color: white; text-decoration: none; text-align: right;">
                <div>
page title designed with
                </div>
                <div style="text-decoration: underline;">
textstudio.com
                </div>
            </a>
        </div>
    </body>
    <script style="display: block;" src="/js/website.js" id="website-js">
    </script>
</html>

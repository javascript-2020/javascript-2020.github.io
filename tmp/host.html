<!-- headers
      cross-origin-isolate
-->

<html>
  <body>
    <iframe src="iframe.html"></iframe>
  </body>
  <script>
  
        window.onload   = ()=>{
        
              var iframe    = document.querySelector('iframe');
              var win       = iframe.contentWindow;
              var doc       = iframe.contentDocument;
              
              console.log(win);
              console.log(doc);
              
              var script    = doc.createElement('script');
              script.textContent    = `
              
      window.test   = async function() {
      
        try {
          const { WebContainer } = await import('https://cdn.jsdelivr.net/npm/@webcontainer/api/+esm');
          const wc = await WebContainer.boot();
          console.log('WebContainer booted:', wc);
        } catch (err) {
          console.error('WebContainer failed:', err);
        }
        
      }//test

              `;
              doc.head.append(script);
              win.test();
              

        }//onload
        
  </script>
</html>

